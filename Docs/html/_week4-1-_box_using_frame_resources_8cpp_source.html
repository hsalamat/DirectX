<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DirectX: Week4/BoxUsingFrameResource/Week4-1-BoxUsingFrameResources.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DirectX
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_week4-1-_box_using_frame_resources_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Week4-1-BoxUsingFrameResources.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="_week4-1-_box_using_frame_resources_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">//***************************************************************************************</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Box Using Frame Resources</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">//</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// Hold down &#39;1&#39; key to view scene in wireframe mode.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">//***************************************************************************************</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;../../Common/d3dApp.h&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;../../Common/MathHelper.h&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;../../Common/UploadBuffer.h&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;../../Common/GeometryGenerator.h&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="_week9_2_trinagle_tessellation_2_frame_resource_8h.html">FrameResource.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using</span> Microsoft::WRL::ComPtr;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_direct_x.html">DirectX</a>;</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="keyword">using namespace </span>DirectX::PackedVector;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">//step3: Our application class will then instantiate a vector of three frame resources, </span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">   21</a></span><span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a> = 3;</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// Step10: Lightweight structure stores parameters to draw a shape.  This will vary from app-to-app.</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">struct </span><a class="code hl_struct" href="struct_render_item.html">RenderItem</a></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>{</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="struct_render_item.html#ad6c4cbd7fea14ab4b71bd3be38208487">   26</a></span>    <a class="code hl_function" href="struct_render_item.html#ad6c4cbd7fea14ab4b71bd3be38208487">RenderItem</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="comment">// World matrix of the shape that describes the object&#39;s local space</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="comment">// relative to the world space, which defines the position, orientation,</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="comment">// and scale of the object in the world.</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    XMFLOAT4X4 <a class="code hl_variable" href="struct_render_item.html#a2e0a651d0ad4ba7975455e22fbde1a28">World</a> = <a class="code hl_function" href="class_math_helper.html#a68b4e9af95b1a36aad30ea80839f6b19">MathHelper::Identity4x4</a>();</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="comment">// Dirty flag indicating the object data has changed and we need to update the constant buffer.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// Because we have an object cbuffer for each FrameResource, we have to apply the</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">// update to each FrameResource.  Thus, when we modify object data, we should set </span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">// NumFramesDirty = gNumFrameResources so that each frame resource gets the update.</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_render_item.html#aca6ae2de91638af530fd5ce91fea3306">NumFramesDirty</a> = <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// Index into GPU constant buffer corresponding to the ObjectCB for this render item.</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    UINT <a class="code hl_variable" href="struct_render_item.html#a4a4015284acd79469b70c358b6c1c2a1">ObjCBIndex</a> = -1;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// Geometry associated with this render-item. Note that multiple</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// render-items can share the same geometry.</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_struct" href="struct_mesh_geometry.html">MeshGeometry</a>* <a class="code hl_variable" href="struct_render_item.html#a61681a415ceebcbc0b8f07d616124deb">Geo</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// Primitive topology.</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    D3D12_PRIMITIVE_TOPOLOGY <a class="code hl_variable" href="struct_render_item.html#ab3aad9050526250c4877956789e50b3a">PrimitiveType</a> = D3D_PRIMITIVE_TOPOLOGY_TRIANGLELIST;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// DrawIndexedInstanced parameters.</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    UINT <a class="code hl_variable" href="struct_render_item.html#ad95fafa012c0d99c216b998f11207e38">IndexCount</a> = 0; <span class="comment">//Number of indices read from the index buffer for each instance.</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    UINT <a class="code hl_variable" href="struct_render_item.html#a979179c6dd354cd329563e3599245463">StartIndexLocation</a> = 0; <span class="comment">//The location of the first index read by the GPU from the index buffer.</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_render_item.html#a3750ef7b2791ea922df46e222649f3dc">BaseVertexLocation</a> = 0; <span class="comment">//A value added to each index before reading a vertex from the vertex buffer.</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>};</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="class_shapes_app.html">   55</a></span><span class="keyword">class </span><a class="code hl_class" href="class_shapes_app.html">ShapesApp</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_d3_d_app.html">D3DApp</a></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>{</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <a class="code hl_function" href="class_shapes_app.html#a7677a2e3525c70b75fe7b9bbf3a55af8">ShapesApp</a>(HINSTANCE hInstance);</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ada5ae7c0ce97f4046065bff3741c1450">   59</a></span>    <a class="code hl_function" href="class_shapes_app.html#ada5ae7c0ce97f4046065bff3741c1450">ShapesApp</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_shapes_app.html">ShapesApp</a>&amp; rhs) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a0c45571476d6aa46a50a926b924face2">   60</a></span>    <a class="code hl_class" href="class_shapes_app.html">ShapesApp</a>&amp; <a class="code hl_function" href="class_shapes_app.html#a0c45571476d6aa46a50a926b924face2">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_shapes_app.html">ShapesApp</a>&amp; rhs) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <a class="code hl_function" href="class_shapes_app.html#a848dbf65b387b3dbf0e6d0e186627046">~ShapesApp</a>();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_shapes_app.html#a8f04fd823611fac3380e07f1b83e9348">Initialize</a>()<span class="keyword">override</span>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a41ed5981e7d106b80661e1aacdf4192f">OnResize</a>()<span class="keyword">override</span>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a3e68fb9a3eafd0dc21e8ef5a2990465e">Update</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)<span class="keyword">override</span>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a8219bebe3bc2a2d9301cafe784a7bad7">Draw</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)<span class="keyword">override</span>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a79b24d2ad45056b3ef4394ed23670cc8">OnMouseDown</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword">override</span>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a90f2349286b9eaa95f5a138ceb3108bf">OnMouseUp</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword">override</span>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa3c11cd1756c95385229b02dc17a867a">OnMouseMove</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)<span class="keyword">override</span>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a451df0174906b422802621261885216a">OnKeyboardInput</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt);</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abd8bcc3bf3d96a70efba3ac17ce01245">UpdateCamera</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a1c9aec35d50a86c0b15618dc8a28b5e0">UpdateObjectCBs</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abfd74b6ff2d0c6e724b1fc9f9569bdcf">UpdateMainPassCB</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a0853eb3e179d364d3a8b9b6f201aa69a">BuildDescriptorHeaps</a>();</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a4fd4f7f8638217cb724b2154ad59dbb9">BuildConstantBufferViews</a>();</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a0e58080351e7a4f93677f5795f1e271f">BuildRootSignature</a>();</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa6dbfd4be3e08bc9e70dd72998c68546">BuildShadersAndInputLayout</a>();</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abfabb159343e3704787becf51554b296">BuildShapeGeometry</a>();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#ab1776e2a52226246d4fea1aa6eaab014">BuildPSOs</a>();</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">//step5</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a2b506b514895ae3646e28d8cf70d4874">BuildFrameResources</a>();</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa69b02a912ec9652b33e0fa42b299931">BuildRenderItems</a>();</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a23329cb596c4227bc0c51c5466e9d0ee">DrawRenderItems</a>(ID3D12GraphicsCommandList* cmdList, <span class="keyword">const</span> std::vector&lt;RenderItem*&gt;&amp; ritems);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">//step4: keep member variables to track the current frame resource :</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">   95</a></span>    std::vector&lt;std::unique_ptr&lt;FrameResource&gt;&gt; <a class="code hl_variable" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">mFrameResources</a>;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">   96</a></span>    <a class="code hl_struct" href="struct_frame_resource.html">FrameResource</a>* <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">   97</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a> = 0;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">   99</a></span>    ComPtr&lt;ID3D12RootSignature&gt; <a class="code hl_variable" href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">mRootSignature</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">  100</a></span>    ComPtr&lt;ID3D12DescriptorHeap&gt; <a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a8b45dd95e79927dd2fa4a0df55f777be">  102</a></span>    ComPtr&lt;ID3D12DescriptorHeap&gt; <a class="code hl_variable" href="class_shapes_app.html#a8b45dd95e79927dd2fa4a0df55f777be">mSrvDescriptorHeap</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ab595d78dc0d39992193ef67988fd2730">  104</a></span>    std::unordered_map&lt;std::string, std::unique_ptr&lt;MeshGeometry&gt;&gt; <a class="code hl_variable" href="class_shapes_app.html#ab595d78dc0d39992193ef67988fd2730">mGeometries</a>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">  105</a></span>    std::unordered_map&lt;std::string, ComPtr&lt;ID3DBlob&gt;&gt; <a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">  106</a></span>    std::unordered_map&lt;std::string, ComPtr&lt;ID3D12PipelineState&gt;&gt; <a class="code hl_variable" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">mPSOs</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">  108</a></span>    std::vector&lt;D3D12_INPUT_ELEMENT_DESC&gt; <a class="code hl_variable" href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">mInputLayout</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="comment">// List of all the render items.</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">  111</a></span>    std::vector&lt;std::unique_ptr&lt;RenderItem&gt;&gt; <a class="code hl_variable" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">mAllRitems</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">//step11: Our application will maintain lists of render items based on how they need to be</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">//drawn; that is, render items that need different PSOs will be kept in different lists.</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// Render items divided by PSO.</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">  117</a></span>    std::vector&lt;RenderItem*&gt; <a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="comment">//std::vector&lt;RenderItem*&gt; mTransparentRitems;  //we could have render items for transparant items</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="comment">//step12: this mMainPassCB stores constant data that is fixed over a given</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="comment">//rendering pass such as the eye position, the view and projection matrices, and information</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">//about the screen(render target) dimensions; it also includes game timing information,</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">//which is useful data to have access to in shader programs.</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">  128</a></span>    <a class="code hl_struct" href="struct_pass_constants.html">PassConstants</a> <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">  130</a></span>    UINT <a class="code hl_variable" href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">mPassCbvOffset</a> = 0;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">  132</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">mIsWireframe</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">  134</a></span>    XMFLOAT3 <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a> = { 0.0f, 0.0f, 0.0f };</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a9feb93c660599744688b0b6460f15c21">  135</a></span>    XMFLOAT4X4 <a class="code hl_variable" href="class_shapes_app.html#a9feb93c660599744688b0b6460f15c21">mView</a> = <a class="code hl_function" href="class_math_helper.html#a68b4e9af95b1a36aad30ea80839f6b19">MathHelper::Identity4x4</a>();</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a9f2f63fde65f034d23ac949ccb31a9f0">  136</a></span>    XMFLOAT4X4 <a class="code hl_variable" href="class_shapes_app.html#a9f2f63fde65f034d23ac949ccb31a9f0">mProj</a> = <a class="code hl_function" href="class_math_helper.html#a68b4e9af95b1a36aad30ea80839f6b19">MathHelper::Identity4x4</a>();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">  138</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">mTheta</a> = 1.5f * XM_PI;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">  139</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a> = 0.2f * XM_PI;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">  140</a></span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> = 15.0f;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">  142</a></span>    POINT <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>};</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno"><a class="line" href="_week4-1-_box_using_frame_resources_8cpp.html#aabcda87589d774901aa87061b8fd0176">  145</a></span><span class="keywordtype">int</span> WINAPI <a class="code hl_function" href="_week4-1-_box_using_frame_resources_8cpp.html#aabcda87589d774901aa87061b8fd0176">WinMain</a>(HINSTANCE hInstance, HINSTANCE prevInstance,</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    PSTR cmdLine, <span class="keywordtype">int</span> showCmd)</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>{</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// Enable run-time memory check for debug builds.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><span class="preprocessor">#if defined(DEBUG) | defined(_DEBUG)</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">try</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <a class="code hl_class" href="class_shapes_app.html">ShapesApp</a> theApp(hInstance);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordflow">if</span> (!theApp.<a class="code hl_function" href="class_shapes_app.html#a8f04fd823611fac3380e07f1b83e9348">Initialize</a>())</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="keywordflow">return</span> theApp.<a class="code hl_function" href="class_d3_d_app.html#a0a2ed8f09bb1ae3a97f3b9a5067c905f">Run</a>();</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">catch</span> (<a class="code hl_class" href="class_dx_exception.html">DxException</a>&amp; e)</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        MessageBox(<span class="keyword">nullptr</span>, e.<a class="code hl_function" href="class_dx_exception.html#a031a5ff549f043decbe96093e73dac27">ToString</a>().c_str(), L<span class="stringliteral">&quot;HR Failed&quot;</span>, MB_OK);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>}</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a7677a2e3525c70b75fe7b9bbf3a55af8">  168</a></span><a class="code hl_function" href="class_shapes_app.html#a7677a2e3525c70b75fe7b9bbf3a55af8">ShapesApp::ShapesApp</a>(HINSTANCE hInstance)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    : <a class="code hl_class" href="class_d3_d_app.html">D3DApp</a>(hInstance)</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>{</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>}</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a848dbf65b387b3dbf0e6d0e186627046">  173</a></span><a class="code hl_function" href="class_shapes_app.html#a848dbf65b387b3dbf0e6d0e186627046">ShapesApp::~ShapesApp</a>()</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a> != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <a class="code hl_function" href="class_d3_d_app.html#afd141907db51f0c177ab89955e9d5de9">FlushCommandQueue</a>();</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>}</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a8f04fd823611fac3380e07f1b83e9348">  179</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="class_shapes_app.html#a8f04fd823611fac3380e07f1b83e9348">ShapesApp::Initialize</a>()</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>{</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_d3_d_app.html#a961fa79170dcbde858923a5250c322be">D3DApp::Initialize</a>())</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// Reset the command list to prep for initialization commands.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;Reset(<a class="code hl_variable" href="class_d3_d_app.html#ae00420d2e3d8305821a1a95ebc1b00bb">mDirectCmdListAlloc</a>.Get(), <span class="keyword">nullptr</span>));</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <a class="code hl_function" href="class_shapes_app.html#a0e58080351e7a4f93677f5795f1e271f">BuildRootSignature</a>();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_function" href="class_shapes_app.html#aa6dbfd4be3e08bc9e70dd72998c68546">BuildShadersAndInputLayout</a>();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <a class="code hl_function" href="class_shapes_app.html#abfabb159343e3704787becf51554b296">BuildShapeGeometry</a>();</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <a class="code hl_function" href="class_shapes_app.html#aa69b02a912ec9652b33e0fa42b299931">BuildRenderItems</a>();</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <a class="code hl_function" href="class_shapes_app.html#a2b506b514895ae3646e28d8cf70d4874">BuildFrameResources</a>();</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <a class="code hl_function" href="class_shapes_app.html#a0853eb3e179d364d3a8b9b6f201aa69a">BuildDescriptorHeaps</a>();</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <a class="code hl_function" href="class_shapes_app.html#a4fd4f7f8638217cb724b2154ad59dbb9">BuildConstantBufferViews</a>();</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <a class="code hl_function" href="class_shapes_app.html#ab1776e2a52226246d4fea1aa6eaab014">BuildPSOs</a>();</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="comment">// Execute the initialization commands.</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;Close());</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    ID3D12CommandList* cmdsLists[] = { <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>.Get() };</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <a class="code hl_variable" href="class_d3_d_app.html#a96ae78a6cf93ec91272032890ef65440">mCommandQueue</a>-&gt;ExecuteCommandLists(_countof(cmdsLists), cmdsLists);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="comment">// Wait until initialization is complete.</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <a class="code hl_function" href="class_d3_d_app.html#afd141907db51f0c177ab89955e9d5de9">FlushCommandQueue</a>();</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>}</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a41ed5981e7d106b80661e1aacdf4192f">  207</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a41ed5981e7d106b80661e1aacdf4192f">ShapesApp::OnResize</a>()</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>{</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <a class="code hl_function" href="class_d3_d_app.html#a4c1b99cd01576c413d3a50d1435f1b8a">D3DApp::OnResize</a>();</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <span class="comment">// The window resized, so update the aspect ratio and recompute the projection matrix.</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    XMMATRIX P = XMMatrixPerspectiveFovLH(0.25f * <a class="code hl_variable" href="class_math_helper.html#a11e988eb2e34337e333972e5fd3b5dba">MathHelper::Pi</a>, <a class="code hl_function" href="class_d3_d_app.html#ab8cf74904b14c4a2072fc020c9bc4d22">AspectRatio</a>(), 1.0f, 1000.0f);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9f2f63fde65f034d23ac949ccb31a9f0">mProj</a>, P);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>}</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span><span class="comment">//step7: for CPU frame n, the algorithm</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="comment">//1. Cycle through the circular frame resource array.</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="comment">//2. Wait until the GPU has completed commands up to this fence point.</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="comment">//3. Update resources in mCurrFrameResource (like cbuffers).</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a3e68fb9a3eafd0dc21e8ef5a2990465e">  221</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a3e68fb9a3eafd0dc21e8ef5a2990465e">ShapesApp::Update</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>{</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <a class="code hl_function" href="class_shapes_app.html#a451df0174906b422802621261885216a">OnKeyboardInput</a>(gt);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    <a class="code hl_function" href="class_shapes_app.html#abd8bcc3bf3d96a70efba3ac17ce01245">UpdateCamera</a>(gt);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">// Cycle through the circular frame resource array.</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a> = (<a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a> + 1) % <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a> = <a class="code hl_variable" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">mFrameResources</a>[<a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a>].get();</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="comment">//this section is really what D3DApp::FlushCommandQueue() used to do for us at the end of each draw() function!</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a> != 0 &amp;&amp; <a class="code hl_variable" href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">mFence</a>-&gt;GetCompletedValue() &lt; <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a>)</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        std::wstring text2 = L<span class="stringliteral">&quot;GPU Completed &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">mFence</a>-&gt;GetCompletedValue()) + L<span class="stringliteral">&quot; but current fence is &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a>) + L<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        OutputDebugString(text2.c_str());</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        HANDLE eventHandle = CreateEventEx(<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">false</span>, EVENT_ALL_ACCESS);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">mFence</a>-&gt;SetEventOnCompletion(<a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a>, eventHandle));</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        WaitForSingleObject(eventHandle, INFINITE);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        CloseHandle(eventHandle);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    }</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">//The idea of these changes is to group constants based on update frequency. The per</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="comment">//pass constants only need to be updated once per rendering pass, and the object constants</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="comment">//only need to change when an objects world matrix changes.</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <a class="code hl_function" href="class_shapes_app.html#a1c9aec35d50a86c0b15618dc8a28b5e0">UpdateObjectCBs</a>(gt);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <a class="code hl_function" href="class_shapes_app.html#abfd74b6ff2d0c6e724b1fc9f9569bdcf">UpdateMainPassCB</a>(gt);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>}</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a8219bebe3bc2a2d9301cafe784a7bad7">  249</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a8219bebe3bc2a2d9301cafe784a7bad7">ShapesApp::Draw</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>{</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keyword">auto</span> cmdListAlloc = <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#a291715f4e38eed237d9799daee6d062b">CmdListAlloc</a>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">// Reuse the memory associated with command recording.</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="comment">// We can only reset when the associated command lists have finished execution on the GPU.</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(cmdListAlloc-&gt;Reset());</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="comment">// A command list can be reset after it has been added to the command queue via ExecuteCommandList.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="comment">// Reusing the command list reuses memory.</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">mIsWireframe</a>)</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;Reset(cmdListAlloc.Get(), <a class="code hl_variable" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">mPSOs</a>[<span class="stringliteral">&quot;opaque_wireframe&quot;</span>].Get()));</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;Reset(cmdListAlloc.Get(), <a class="code hl_variable" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">mPSOs</a>[<span class="stringliteral">&quot;opaque&quot;</span>].Get()));</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;RSSetViewports(1, &amp;<a class="code hl_variable" href="class_d3_d_app.html#ab86744c66c883d3815c5d08107b16408">mScreenViewport</a>);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;RSSetScissorRects(1, &amp;<a class="code hl_variable" href="class_d3_d_app.html#adbf6e2922df9e6545390049968715547">mScissorRect</a>);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="comment">// Indicate a state transition on the resource usage.</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;ResourceBarrier(1, &amp;CD3DX12_RESOURCE_BARRIER::Transition(<a class="code hl_function" href="class_d3_d_app.html#a851376059fec11e3a6d7535785c5d8cd">CurrentBackBuffer</a>(),</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        D3D12_RESOURCE_STATE_PRESENT, D3D12_RESOURCE_STATE_RENDER_TARGET));</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span> </div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">// Clear the back buffer and depth buffer.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;ClearRenderTargetView(<a class="code hl_function" href="class_d3_d_app.html#ac796a8fcd1a1af0e4665e221af6981d4">CurrentBackBufferView</a>(), Colors::LightSteelBlue, 0, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;ClearDepthStencilView(<a class="code hl_function" href="class_d3_d_app.html#a2d2bfecf16e881f1d65f464767d38c12">DepthStencilView</a>(), D3D12_CLEAR_FLAG_DEPTH | D3D12_CLEAR_FLAG_STENCIL, 1.0f, 0, 0, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="comment">// Specify the buffers we are going to render to.</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;OMSetRenderTargets(1, &amp;<a class="code hl_function" href="class_d3_d_app.html#ac796a8fcd1a1af0e4665e221af6981d4">CurrentBackBufferView</a>(), <span class="keyword">true</span>, &amp;<a class="code hl_function" href="class_d3_d_app.html#a2d2bfecf16e881f1d65f464767d38c12">DepthStencilView</a>());</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    ID3D12DescriptorHeap* descriptorHeaps[] = { <a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>.Get() };</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;SetDescriptorHeaps(_countof(descriptorHeaps), descriptorHeaps);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;SetGraphicsRootSignature(<a class="code hl_variable" href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">mRootSignature</a>.Get());</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordtype">int</span> passCbvIndex = <a class="code hl_variable" href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">mPassCbvOffset</a> + <a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keyword">auto</span> passCbvHandle = CD3DX12_GPU_DESCRIPTOR_HANDLE(<a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>-&gt;GetGPUDescriptorHandleForHeapStart());</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    passCbvHandle.Offset(passCbvIndex, <a class="code hl_variable" href="class_d3_d_app.html#a0e084fa045c8e46d65a37889ff5d307d">mCbvSrvUavDescriptorSize</a>);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;SetGraphicsRootDescriptorTable(1, passCbvHandle);</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <a class="code hl_function" href="class_shapes_app.html#a23329cb596c4227bc0c51c5466e9d0ee">DrawRenderItems</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>.Get(), <a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="comment">// Indicate a state transition on the resource usage.</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;ResourceBarrier(1, &amp;CD3DX12_RESOURCE_BARRIER::Transition(<a class="code hl_function" href="class_d3_d_app.html#a851376059fec11e3a6d7535785c5d8cd">CurrentBackBuffer</a>(),</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        D3D12_RESOURCE_STATE_RENDER_TARGET, D3D12_RESOURCE_STATE_PRESENT));</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="comment">// Done recording commands.</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>-&gt;Close());</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="comment">// Add the command list to the queue for execution.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    ID3D12CommandList* cmdsLists[] = { <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>.Get() };</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_variable" href="class_d3_d_app.html#a96ae78a6cf93ec91272032890ef65440">mCommandQueue</a>-&gt;ExecuteCommandLists(_countof(cmdsLists), cmdsLists);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="comment">// Swap the back and front buffers</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#adac97bdf38a37003abbbd7d39c2a75fb">mSwapChain</a>-&gt;Present(0, 0));</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <a class="code hl_variable" href="class_d3_d_app.html#ab0ef1ea8fcb85251dcd6d603a4090d62">mCurrBackBuffer</a> = (<a class="code hl_variable" href="class_d3_d_app.html#ab0ef1ea8fcb85251dcd6d603a4090d62">mCurrBackBuffer</a> + 1) % <a class="code hl_variable" href="class_d3_d_app.html#af4cd47b4bb3b28e1013e861355baf8e8">SwapChainBufferCount</a>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="comment">//Step1:  we have been calling D3DApp::FlushCommandQueue at the end of every</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="comment">//frame to ensure the GPU has finished executing all the commands for the frame.This solution works but is inefficient</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="comment">//For every frame, the CPU and GPU are idling at some point.</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="comment">//  FlushCommandQueue();</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="comment">//step9:  Advance the fence value to mark commands up to this fence point.</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a> = ++<a class="code hl_variable" href="class_d3_d_app.html#acc7041db5dcaaa0d76ed263c55d1c6b2">mCurrentFence</a>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="comment">// Add an instruction to the command queue to set a new fence point. </span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// Because we are on the GPU timeline, the new fence point won&#39;t be </span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="comment">// set until the GPU finishes processing all the commands prior to this Signal().</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <a class="code hl_variable" href="class_d3_d_app.html#a96ae78a6cf93ec91272032890ef65440">mCommandQueue</a>-&gt;Signal(<a class="code hl_variable" href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">mFence</a>.Get(), <a class="code hl_variable" href="class_d3_d_app.html#acc7041db5dcaaa0d76ed263c55d1c6b2">mCurrentFence</a>);</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="comment">// Note that GPU could still be working on commands from previous</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="comment">// frames, but that is okay, because we are not touching any frame</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="comment">// resources associated with those frames.</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    std::wstring text = L<span class="stringliteral">&quot;Current Frame Resource Index= &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a>) + L<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    text += L<span class="stringliteral">&quot;Current Fence = &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_d3_d_app.html#acc7041db5dcaaa0d76ed263c55d1c6b2">mCurrentFence</a>) + L<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="comment">// Has the GPU finished processing the commands of the current frame resource?</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// If not, wait until the GPU has completed commands up to this fence point.</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    text += L<span class="stringliteral">&quot;CPU has added commands up to this Fence Number for current frame resource = &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">Fence</a>) + L<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    text += L<span class="stringliteral">&quot;GPU has completed commands up to Fence Number = &quot;</span> + std::to_wstring(<a class="code hl_variable" href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">mFence</a>-&gt;GetCompletedValue()) + L<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    OutputDebugString(text.c_str());</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>}</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a79b24d2ad45056b3ef4394ed23670cc8">  339</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a79b24d2ad45056b3ef4394ed23670cc8">ShapesApp::OnMouseDown</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>{</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.x = x;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.y = y;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span> </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    SetCapture(<a class="code hl_variable" href="class_d3_d_app.html#ae68879f7a2cf2b770b1015ab9c0f14e5">mhMainWnd</a>);</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>}</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a90f2349286b9eaa95f5a138ceb3108bf">  347</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a90f2349286b9eaa95f5a138ceb3108bf">ShapesApp::OnMouseUp</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>{</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    ReleaseCapture();</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>}</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno"><a class="line" href="class_shapes_app.html#aa3c11cd1756c95385229b02dc17a867a">  352</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa3c11cd1756c95385229b02dc17a867a">ShapesApp::OnMouseMove</a>(WPARAM btnState, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>{</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">if</span> ((btnState &amp; MK_LBUTTON) != 0)</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <span class="comment">// Make each pixel correspond to a quarter of a degree.</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <span class="keywordtype">float</span> dx = XMConvertToRadians(0.25f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x - <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.x));</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <span class="keywordtype">float</span> dy = XMConvertToRadians(0.25f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y - <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.y));</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="comment">// Update angles based on input to orbit camera around box.</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <a class="code hl_variable" href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">mTheta</a> += dx;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a> += dy;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="comment">// Restrict the angle mPhi.</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a> = <a class="code hl_function" href="class_math_helper.html#af659fe642c374ff42247e25e887ae816">MathHelper::Clamp</a>(<a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a>, 0.1f, <a class="code hl_variable" href="class_math_helper.html#a11e988eb2e34337e333972e5fd3b5dba">MathHelper::Pi</a> - 0.1f);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((btnState &amp; MK_RBUTTON) != 0)</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="comment">// Make each pixel correspond to 0.2 unit in the scene.</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <span class="keywordtype">float</span> dx = 0.05f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x - <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.x);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordtype">float</span> dy = 0.05f * <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y - <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.y);</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="comment">// Update the camera radius based on input.</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> += dx - dy;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="comment">// Restrict the radius.</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> = <a class="code hl_function" href="class_math_helper.html#af659fe642c374ff42247e25e887ae816">MathHelper::Clamp</a>(<a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a>, 5.0f, 150.0f);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.x = x;</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <a class="code hl_variable" href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">mLastMousePos</a>.y = y;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>}</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a451df0174906b422802621261885216a">  384</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a451df0174906b422802621261885216a">ShapesApp::OnKeyboardInput</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>{</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="comment">//Determines whether a key is up or down at the time the function is called, and whether the key was pressed after a previous call to GetAsyncKeyState.</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="comment">//If the function succeeds, the return value specifies whether the key was pressed since the last call to GetAsyncKeyState, </span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">//and whether the key is currently up or down. If the most significant bit is set, the key is down, and if the least significant bit is set, the key was pressed after the previous call to GetAsyncKeyState.</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="comment">//if (GetAsyncKeyState(&#39;1&#39;) &amp; 0x8000)</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="keywordtype">short</span> key = GetAsyncKeyState(<span class="charliteral">&#39;1&#39;</span>);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="keywordflow">if</span> (key &amp; 0x8000)  <span class="comment">//if one is pressed, 0x8000 = 32767 , key = -32767 = FFFFFFFFFFFF8001</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <a class="code hl_variable" href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">mIsWireframe</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <a class="code hl_variable" href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">mIsWireframe</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>}</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno"><a class="line" href="class_shapes_app.html#abd8bcc3bf3d96a70efba3ac17ce01245">  398</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abd8bcc3bf3d96a70efba3ac17ce01245">ShapesApp::UpdateCamera</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>{</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="comment">// Convert Spherical to Cartesian coordinates.</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.x = <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> * sinf(<a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a>) * cosf(<a class="code hl_variable" href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">mTheta</a>);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.z = <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> * sinf(<a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a>) * sinf(<a class="code hl_variable" href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">mTheta</a>);</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.y = <a class="code hl_variable" href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">mRadius</a> * cosf(<a class="code hl_variable" href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">mPhi</a>);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="comment">// Build the view matrix.</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    XMVECTOR pos = XMVectorSet(<a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.x, <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.y, <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>.z, 1.0f);</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    XMVECTOR target = XMVectorZero();</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    XMVECTOR up = XMVectorSet(0.0f, 1.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    XMMATRIX view = XMMatrixLookAtLH(pos, target, up);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9feb93c660599744688b0b6460f15c21">mView</a>, view);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>}</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span><span class="comment">//step8: Update resources (cbuffers) in mCurrFrameResource</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a1c9aec35d50a86c0b15618dc8a28b5e0">  415</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a1c9aec35d50a86c0b15618dc8a28b5e0">ShapesApp::UpdateObjectCBs</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>{</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keyword">auto</span> currObjectCB = <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#ad1c8bf68d9fe27c0bf5224057fe42b14">ObjectCB</a>.get();</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; e : <a class="code hl_variable" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">mAllRitems</a>)</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="comment">// Only update the cbuffer data if the constants have changed.  </span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <span class="comment">// This needs to be tracked per frame resource.</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordflow">if</span> (e-&gt;NumFramesDirty &gt; 0)</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            XMMATRIX world = XMLoadFloat4x4(&amp;e-&gt;World);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <a class="code hl_struct" href="struct_object_constants.html">ObjectConstants</a> objConstants;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            XMStoreFloat4x4(&amp;objConstants.<a class="code hl_variable" href="struct_object_constants.html#ac2a0621da4e0ef99d7c8100ed64359ff">World</a>, XMMatrixTranspose(world));</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            currObjectCB-&gt;CopyData(e-&gt;ObjCBIndex, objConstants);</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <span class="comment">// Next FrameResource need to be updated too.</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            e-&gt;NumFramesDirty--;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        }</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>}</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="comment">//CBVs will be set at different frequenciesthe per pass CBV only needs to be set once per</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><span class="comment">//rendering pass while the per object CBV needs to be set per render item</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno"><a class="line" href="class_shapes_app.html#abfd74b6ff2d0c6e724b1fc9f9569bdcf">  439</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abfd74b6ff2d0c6e724b1fc9f9569bdcf">ShapesApp::UpdateMainPassCB</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_game_timer.html">GameTimer</a>&amp; gt)</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>{</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    XMMATRIX view = XMLoadFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9feb93c660599744688b0b6460f15c21">mView</a>);</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    XMMATRIX proj = XMLoadFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9f2f63fde65f034d23ac949ccb31a9f0">mProj</a>);</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    XMMATRIX viewProj = XMMatrixMultiply(view, proj);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    XMMATRIX invView = XMMatrixInverse(&amp;XMMatrixDeterminant(view), view);</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    XMMATRIX invProj = XMMatrixInverse(&amp;XMMatrixDeterminant(proj), proj);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    XMMATRIX invViewProj = XMMatrixInverse(&amp;XMMatrixDeterminant(viewProj), viewProj);</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a31fec7617b89727cc44c9802c57bb57a">View</a>, XMMatrixTranspose(view));</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a4c0b015fa6bc9623ccfa4be6a16a4da9">InvView</a>, XMMatrixTranspose(invView));</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a8af99b882f26e3507717dacc0c957521">Proj</a>, XMMatrixTranspose(proj));</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a9a1ac0a0421d54bf40c9749ec1d1537c">InvProj</a>, XMMatrixTranspose(invProj));</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#aa44b7dd1a9692065876bd8d2d6efb76c">ViewProj</a>, XMMatrixTranspose(viewProj));</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    XMStoreFloat4x4(&amp;<a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a54f008edf338ad532633c2bb797fca88">InvViewProj</a>, XMMatrixTranspose(invViewProj));</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#aa902cc9c84da7a58dd0302624e58bfc3">EyePosW</a> = <a class="code hl_variable" href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">mEyePos</a>;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#aca6c8d20f6c92f8a117ef21bd7666687">RenderTargetSize</a> = XMFLOAT2((<span class="keywordtype">float</span>)<a class="code hl_variable" href="class_d3_d_app.html#a3f9dae9800854a7aae8a9ca8677a4d4f">mClientWidth</a>, (<span class="keywordtype">float</span>)<a class="code hl_variable" href="class_d3_d_app.html#ad54b6af44b0c13b645f363d849230d51">mClientHeight</a>);</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#af25015138bf3b92384560ec1eed1e6aa">InvRenderTargetSize</a> = XMFLOAT2(1.0f / <a class="code hl_variable" href="class_d3_d_app.html#a3f9dae9800854a7aae8a9ca8677a4d4f">mClientWidth</a>, 1.0f / <a class="code hl_variable" href="class_d3_d_app.html#ad54b6af44b0c13b645f363d849230d51">mClientHeight</a>);</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#affe3124795eccdba77dae8cef5399e7d">NearZ</a> = 1.0f;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#acff44014fa749b6cc636c0ed3516bab7">FarZ</a> = 1000.0f;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#a8b7dc8578d216518bff83264bc85d34c">TotalTime</a> = gt.<a class="code hl_function" href="class_game_timer.html#a4d51c259eeb170d1841f84f41779592d">TotalTime</a>();</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>.<a class="code hl_variable" href="struct_pass_constants.html#afd52d73d793299a6ad6a68bc137bd841">DeltaTime</a> = gt.<a class="code hl_function" href="class_game_timer.html#a67d0ce60fa40d5ff728d101fc31e30f6">DeltaTime</a>();</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="keyword">auto</span> currPassCB = <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#a9a85cb113dec7553de94ae579bd0b770">PassCB</a>.get();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    currPassCB-&gt;CopyData(0, <a class="code hl_variable" href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">mMainPassCB</a>);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>}</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a0853eb3e179d364d3a8b9b6f201aa69a">  467</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a0853eb3e179d364d3a8b9b6f201aa69a">ShapesApp::BuildDescriptorHeaps</a>()</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>{</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    UINT objCount = (UINT)<a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>.size();</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="comment">// Need a CBV descriptor for each object for each frame resource,</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="comment">// +1 for the perPass CBV for each frame resource.</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    UINT numDescriptors = (objCount + 1) * <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="comment">// Save an offset to the start of the pass CBVs.  These are the last 3 descriptors.</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <a class="code hl_variable" href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">mPassCbvOffset</a> = objCount * <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    D3D12_DESCRIPTOR_HEAP_DESC cbvHeapDesc;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    cbvHeapDesc.NumDescriptors = numDescriptors;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    cbvHeapDesc.Type = D3D12_DESCRIPTOR_HEAP_TYPE_CBV_SRV_UAV;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    cbvHeapDesc.Flags = D3D12_DESCRIPTOR_HEAP_FLAG_SHADER_VISIBLE;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    cbvHeapDesc.NodeMask = 0;</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateDescriptorHeap(&amp;cbvHeapDesc,</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        IID_PPV_ARGS(&amp;<a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>)));</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>}</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a4fd4f7f8638217cb724b2154ad59dbb9">  487</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a4fd4f7f8638217cb724b2154ad59dbb9">ShapesApp::BuildConstantBufferViews</a>()</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>{</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    UINT objCBByteSize = <a class="code hl_function" href="classd3d_util.html#a0883e0848cae813b2bc71570f3303e92">d3dUtil::CalcConstantBufferByteSize</a>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_object_constants.html">ObjectConstants</a>));</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span> </div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    UINT objCount = (UINT)<a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>.size();</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="comment">// Need a CBV descriptor for each object for each frame resource.</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frameIndex = 0; frameIndex &lt; <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>; ++frameIndex)</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    {</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        <span class="keyword">auto</span> objectCB = <a class="code hl_variable" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">mFrameResources</a>[frameIndex]-&gt;ObjectCB-&gt;Resource();</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        <span class="keywordflow">for</span> (UINT i = 0; i &lt; objCount; ++i)</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            D3D12_GPU_VIRTUAL_ADDRESS cbAddress = objectCB-&gt;GetGPUVirtualAddress();</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>            <span class="comment">// Offset to the ith object constant buffer in the buffer.</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>            cbAddress += i * objCBByteSize;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="comment">// Offset to the object cbv in the descriptor heap.</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>            <span class="keywordtype">int</span> heapIndex = frameIndex * objCount + i;</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            <span class="keyword">auto</span> handle = CD3DX12_CPU_DESCRIPTOR_HANDLE(<a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>-&gt;GetCPUDescriptorHandleForHeapStart());</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            handle.Offset(heapIndex, <a class="code hl_variable" href="class_d3_d_app.html#a0e084fa045c8e46d65a37889ff5d307d">mCbvSrvUavDescriptorSize</a>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            D3D12_CONSTANT_BUFFER_VIEW_DESC cbvDesc;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>            cbvDesc.BufferLocation = cbAddress;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            cbvDesc.SizeInBytes = objCBByteSize;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateConstantBufferView(&amp;cbvDesc, handle);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    UINT passCBByteSize = <a class="code hl_function" href="classd3d_util.html#a0883e0848cae813b2bc71570f3303e92">d3dUtil::CalcConstantBufferByteSize</a>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_pass_constants.html">PassConstants</a>));</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="comment">// Last three descriptors are the pass CBVs for each frame resource.</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> frameIndex = 0; frameIndex &lt; <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>; ++frameIndex)</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <span class="keyword">auto</span> passCB = <a class="code hl_variable" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">mFrameResources</a>[frameIndex]-&gt;PassCB-&gt;Resource();</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        D3D12_GPU_VIRTUAL_ADDRESS cbAddress = passCB-&gt;GetGPUVirtualAddress();</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        <span class="comment">// Offset to the pass cbv in the descriptor heap.</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="keywordtype">int</span> heapIndex = <a class="code hl_variable" href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">mPassCbvOffset</a> + frameIndex;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keyword">auto</span> handle = CD3DX12_CPU_DESCRIPTOR_HANDLE(<a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>-&gt;GetCPUDescriptorHandleForHeapStart());</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        handle.Offset(heapIndex, <a class="code hl_variable" href="class_d3_d_app.html#a0e084fa045c8e46d65a37889ff5d307d">mCbvSrvUavDescriptorSize</a>);</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        D3D12_CONSTANT_BUFFER_VIEW_DESC cbvDesc;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        cbvDesc.BufferLocation = cbAddress;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        cbvDesc.SizeInBytes = passCBByteSize;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateConstantBufferView(&amp;cbvDesc, handle);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>}</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a0e58080351e7a4f93677f5795f1e271f">  538</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a0e58080351e7a4f93677f5795f1e271f">ShapesApp::BuildRootSignature</a>()</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>{</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="comment">//step 15</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="comment">//The resources that our shaders expect have changed; therefore, we need to update the</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="comment">//root signature accordingly to take two descriptor tables(we need two tables because the</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="comment">//CBVs will be set at different frequenciesthe per pass CBV only needs to be set once per</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="comment">//rendering pass while the per object CBV needs to be set per render item) :</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    CD3DX12_DESCRIPTOR_RANGE cbvTable0;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    cbvTable0.Init(D3D12_DESCRIPTOR_RANGE_TYPE_CBV, 1, 0);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span> </div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    CD3DX12_DESCRIPTOR_RANGE cbvTable1;</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    cbvTable1.Init(D3D12_DESCRIPTOR_RANGE_TYPE_CBV, 1, 1);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="comment">// Root parameter can be a table, root descriptor or root constants.</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    CD3DX12_ROOT_PARAMETER slotRootParameter[2];</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="comment">// Create root CBVs.</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    slotRootParameter[0].InitAsDescriptorTable(1, &amp;cbvTable0);</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    slotRootParameter[1].InitAsDescriptorTable(1, &amp;cbvTable1);</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="comment">// A root signature is an array of root parameters.</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    CD3DX12_ROOT_SIGNATURE_DESC rootSigDesc(2, slotRootParameter, 0, <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        D3D12_ROOT_SIGNATURE_FLAG_ALLOW_INPUT_ASSEMBLER_INPUT_LAYOUT);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="comment">// create a root signature with a single slot which points to a descriptor range consisting of a single constant buffer</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    ComPtr&lt;ID3DBlob&gt; serializedRootSig = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    ComPtr&lt;ID3DBlob&gt; errorBlob = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    HRESULT hr = D3D12SerializeRootSignature(&amp;rootSigDesc, D3D_ROOT_SIGNATURE_VERSION_1,</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        serializedRootSig.GetAddressOf(), errorBlob.GetAddressOf());</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="keywordflow">if</span> (errorBlob != <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        ::OutputDebugStringA((<span class="keywordtype">char</span>*)errorBlob-&gt;GetBufferPointer());</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    }</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(hr);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateRootSignature(</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        0,</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        serializedRootSig-&gt;GetBufferPointer(),</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        serializedRootSig-&gt;GetBufferSize(),</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        IID_PPV_ARGS(<a class="code hl_variable" href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">mRootSignature</a>.GetAddressOf())));</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>}</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span> </div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno"><a class="line" href="class_shapes_app.html#aa6dbfd4be3e08bc9e70dd72998c68546">  582</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa6dbfd4be3e08bc9e70dd72998c68546">ShapesApp::BuildShadersAndInputLayout</a>()</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>{</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;standardVS&quot;</span>] = <a class="code hl_function" href="classd3d_util.html#acac6acd838913d63466e4f0159bfe8b0">d3dUtil::CompileShader</a>(L<span class="stringliteral">&quot;Shaders\\VS.hlsl&quot;</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;VS&quot;</span>, <span class="stringliteral">&quot;vs_5_1&quot;</span>);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;opaquePS&quot;</span>] = <a class="code hl_function" href="classd3d_util.html#acac6acd838913d63466e4f0159bfe8b0">d3dUtil::CompileShader</a>(L<span class="stringliteral">&quot;Shaders\\PS.hlsl&quot;</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;PS&quot;</span>, <span class="stringliteral">&quot;ps_5_1&quot;</span>);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <a class="code hl_variable" href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">mInputLayout</a> =</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        { <span class="stringliteral">&quot;POSITION&quot;</span>, 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D12_INPUT_CLASSIFICATION_PER_VERTEX_DATA, 0 },</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        { <span class="stringliteral">&quot;COLOR&quot;</span>, 0, DXGI_FORMAT_R32G32B32A32_FLOAT, 0, 12, D3D12_INPUT_CLASSIFICATION_PER_VERTEX_DATA, 0 },</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    };</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>}</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="comment">//step16</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno"><a class="line" href="class_shapes_app.html#abfabb159343e3704787becf51554b296">  595</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#abfabb159343e3704787becf51554b296">ShapesApp::BuildShapeGeometry</a>()</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>{</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="comment">//GeometryGenerator is a utility class for generating simple geometric shapes like grids, sphere, cylinders, and boxes</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <a class="code hl_class" href="class_geometry_generator.html">GeometryGenerator</a> geoGen;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <span class="comment">//The MeshData structure is a simple structure nested inside GeometryGenerator that stores a vertex and index list</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    <a class="code hl_struct" href="struct_geometry_generator_1_1_mesh_data.html">GeometryGenerator::MeshData</a> box = geoGen.<a class="code hl_function" href="class_geometry_generator.html#a9ebf88d1bee287c6e211bff43fbdd3a0">CreateBox</a>(2.0f, 2.0f, 2.0f, 0);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="comment">// We are concatenating all the geometry into one big vertex/index buffer.  So</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <span class="comment">// define the regions in the buffer each submesh covers.</span></div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="comment">// Cache the vertex offsets to each object in the concatenated vertex buffer.</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    UINT boxVertexOffset = 0;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <span class="comment">// Cache the starting index for each object in the concatenated index buffer.</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    UINT boxIndexOffset = 0;</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span> </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// Define the SubmeshGeometry that cover different </span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="comment">// regions of the vertex/index buffers.</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <a class="code hl_struct" href="struct_submesh_geometry.html">SubmeshGeometry</a> boxSubmesh;</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    boxSubmesh.<a class="code hl_variable" href="struct_submesh_geometry.html#ab28b180ab73cabb07553c76f3f32c180">IndexCount</a> = (UINT)box.<a class="code hl_variable" href="struct_geometry_generator_1_1_mesh_data.html#af32ad2f27a3c6c78700f726050e2eb73">Indices32</a>.size();</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    boxSubmesh.<a class="code hl_variable" href="struct_submesh_geometry.html#a56f8aee51b11ee61a229679000a1aeb6">StartIndexLocation</a> = boxIndexOffset;</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    boxSubmesh.<a class="code hl_variable" href="struct_submesh_geometry.html#a95e805e2c8022aea5826d7343ee7dc20">BaseVertexLocation</a> = boxVertexOffset;</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <span class="comment">// Extract the vertex elements we are interested in and pack the</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="comment">// vertices of all the meshes into one vertex buffer.</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keyword">auto</span> totalVertexCount = box.<a class="code hl_variable" href="struct_geometry_generator_1_1_mesh_data.html#a2a85f97f9a84b4f68d71cdcd41a7198b">Vertices</a>.size();</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    std::vector&lt;Vertex&gt; vertices(totalVertexCount);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    UINT k = 0;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; box.<a class="code hl_variable" href="struct_geometry_generator_1_1_mesh_data.html#a2a85f97f9a84b4f68d71cdcd41a7198b">Vertices</a>.size(); ++i, ++k)</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        vertices[k].Pos = box.<a class="code hl_variable" href="struct_geometry_generator_1_1_mesh_data.html#a2a85f97f9a84b4f68d71cdcd41a7198b">Vertices</a>[i].Position;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        vertices[k].Color = XMFLOAT4(DirectX::Colors::DarkOrange);</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    }</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span> </div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    std::vector&lt;std::uint16_t&gt; indices;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    indices.insert(indices.end(), std::begin(box.<a class="code hl_function" href="struct_geometry_generator_1_1_mesh_data.html#a905f88aa2c83239ed6887f8dd9bcbf52">GetIndices16</a>()), std::end(box.<a class="code hl_function" href="struct_geometry_generator_1_1_mesh_data.html#a905f88aa2c83239ed6887f8dd9bcbf52">GetIndices16</a>()));</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="keyword">const</span> UINT vbByteSize = (UINT)vertices.size() * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_vertex.html">Vertex</a>);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keyword">const</span> UINT ibByteSize = (UINT)indices.size() * <span class="keyword">sizeof</span>(std::uint16_t);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keyword">auto</span> geo = std::make_unique&lt;MeshGeometry&gt;();</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    geo-&gt;Name = <span class="stringliteral">&quot;shapeGeo&quot;</span>;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(D3DCreateBlob(vbByteSize, &amp;geo-&gt;VertexBufferCPU));</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    CopyMemory(geo-&gt;VertexBufferCPU-&gt;GetBufferPointer(), vertices.data(), vbByteSize);</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(D3DCreateBlob(ibByteSize, &amp;geo-&gt;IndexBufferCPU));</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    CopyMemory(geo-&gt;IndexBufferCPU-&gt;GetBufferPointer(), indices.data(), ibByteSize);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span> </div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    geo-&gt;VertexBufferGPU = <a class="code hl_function" href="classd3d_util.html#ae4a68e5b73f032619ee5c2db64f57899">d3dUtil::CreateDefaultBuffer</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>.Get(),</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>        <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>.Get(), vertices.data(), vbByteSize, geo-&gt;VertexBufferUploader);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    geo-&gt;IndexBufferGPU = <a class="code hl_function" href="classd3d_util.html#ae4a68e5b73f032619ee5c2db64f57899">d3dUtil::CreateDefaultBuffer</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>.Get(),</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        <a class="code hl_variable" href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">mCommandList</a>.Get(), indices.data(), ibByteSize, geo-&gt;IndexBufferUploader);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    geo-&gt;VertexByteStride = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_vertex.html">Vertex</a>);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    geo-&gt;VertexBufferByteSize = vbByteSize;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    geo-&gt;IndexFormat = DXGI_FORMAT_R16_UINT;</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    geo-&gt;IndexBufferByteSize = ibByteSize;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span> </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    geo-&gt;DrawArgs[<span class="stringliteral">&quot;box&quot;</span>] = boxSubmesh;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <a class="code hl_variable" href="class_shapes_app.html#ab595d78dc0d39992193ef67988fd2730">mGeometries</a>[geo-&gt;Name] = std::move(geo);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>}</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span> </div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno"><a class="line" href="class_shapes_app.html#ab1776e2a52226246d4fea1aa6eaab014">  676</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#ab1776e2a52226246d4fea1aa6eaab014">ShapesApp::BuildPSOs</a>()</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>{</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    D3D12_GRAPHICS_PIPELINE_STATE_DESC opaquePsoDesc;</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span> </div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="comment">// PSO for opaque objects.</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    ZeroMemory(&amp;opaquePsoDesc, <span class="keyword">sizeof</span>(D3D12_GRAPHICS_PIPELINE_STATE_DESC));</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    opaquePsoDesc.InputLayout = { <a class="code hl_variable" href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">mInputLayout</a>.data(), (UINT)<a class="code hl_variable" href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">mInputLayout</a>.size() };</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    opaquePsoDesc.pRootSignature = <a class="code hl_variable" href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">mRootSignature</a>.Get();</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    opaquePsoDesc.VS =</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <span class="keyword">reinterpret_cast&lt;</span>BYTE*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;standardVS&quot;</span>]-&gt;GetBufferPointer()),</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;standardVS&quot;</span>]-&gt;GetBufferSize()</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    };</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    opaquePsoDesc.PS =</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        <span class="keyword">reinterpret_cast&lt;</span>BYTE*<span class="keyword">&gt;</span>(<a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;opaquePS&quot;</span>]-&gt;GetBufferPointer()),</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        <a class="code hl_variable" href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">mShaders</a>[<span class="stringliteral">&quot;opaquePS&quot;</span>]-&gt;GetBufferSize()</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    };</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    opaquePsoDesc.RasterizerState = CD3DX12_RASTERIZER_DESC(D3D12_DEFAULT);</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    opaquePsoDesc.RasterizerState.FillMode = D3D12_FILL_MODE_SOLID;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    opaquePsoDesc.BlendState = CD3DX12_BLEND_DESC(D3D12_DEFAULT);</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    opaquePsoDesc.DepthStencilState = CD3DX12_DEPTH_STENCIL_DESC(D3D12_DEFAULT);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    opaquePsoDesc.SampleMask = UINT_MAX;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    opaquePsoDesc.PrimitiveTopologyType = D3D12_PRIMITIVE_TOPOLOGY_TYPE_TRIANGLE;</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    opaquePsoDesc.NumRenderTargets = 1;</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    opaquePsoDesc.RTVFormats[0] = <a class="code hl_variable" href="class_d3_d_app.html#a025509339d4e0ec2781a8deb9d4218cc">mBackBufferFormat</a>;</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    opaquePsoDesc.SampleDesc.Count = <a class="code hl_variable" href="class_d3_d_app.html#a6cbfb6c8fcc5edec4fb82aacaadf7fbb">m4xMsaaState</a> ? 4 : 1;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    opaquePsoDesc.SampleDesc.Quality = <a class="code hl_variable" href="class_d3_d_app.html#a6cbfb6c8fcc5edec4fb82aacaadf7fbb">m4xMsaaState</a> ? (<a class="code hl_variable" href="class_d3_d_app.html#afb28a606eca768c1bb6cdc2109683dc7">m4xMsaaQuality</a> - 1) : 0;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    opaquePsoDesc.DSVFormat = <a class="code hl_variable" href="class_d3_d_app.html#af2441a306c7f369256983c4f5f43395a">mDepthStencilFormat</a>;</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateGraphicsPipelineState(&amp;opaquePsoDesc, IID_PPV_ARGS(&amp;<a class="code hl_variable" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">mPSOs</a>[<span class="stringliteral">&quot;opaque&quot;</span>])));</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span> </div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="comment">// PSO for opaque wireframe objects.</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span> </div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    D3D12_GRAPHICS_PIPELINE_STATE_DESC opaqueWireframePsoDesc = opaquePsoDesc;</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    opaqueWireframePsoDesc.RasterizerState.FillMode = D3D12_FILL_MODE_WIREFRAME;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <a class="code hl_define" href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a>(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>-&gt;CreateGraphicsPipelineState(&amp;opaqueWireframePsoDesc, IID_PPV_ARGS(&amp;<a class="code hl_variable" href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">mPSOs</a>[<span class="stringliteral">&quot;opaque_wireframe&quot;</span>])));</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>}</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span><span class="comment">//step6: build three frame resources</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span><span class="comment">//FrameResource constructor:     FrameResource(ID3D12Device* device, UINT passCount, UINT objectCount);</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a2b506b514895ae3646e28d8cf70d4874">  722</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a2b506b514895ae3646e28d8cf70d4874">ShapesApp::BuildFrameResources</a>()</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>{</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a>; ++i)</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <a class="code hl_variable" href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">mFrameResources</a>.push_back(std::make_unique&lt;FrameResource&gt;(<a class="code hl_variable" href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">md3dDevice</a>.Get(),</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>            1, (UINT)<a class="code hl_variable" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">mAllRitems</a>.size()));</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    }</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>}</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span> </div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno"><a class="line" href="class_shapes_app.html#aa69b02a912ec9652b33e0fa42b299931">  731</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#aa69b02a912ec9652b33e0fa42b299931">ShapesApp::BuildRenderItems</a>()</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>{</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <span class="keyword">auto</span> boxRitem = std::make_unique&lt;RenderItem&gt;();</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    XMStoreFloat4x4(&amp;boxRitem-&gt;World, XMMatrixScaling(2.0f, 2.0f, 2.0f) * XMMatrixTranslation(0.0f, 0.5f, 0.0f));</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    boxRitem-&gt;ObjCBIndex = 0;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    boxRitem-&gt;Geo = <a class="code hl_variable" href="class_shapes_app.html#ab595d78dc0d39992193ef67988fd2730">mGeometries</a>[<span class="stringliteral">&quot;shapeGeo&quot;</span>].get();</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    boxRitem-&gt;PrimitiveType = D3D_PRIMITIVE_TOPOLOGY_TRIANGLELIST;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>    boxRitem-&gt;IndexCount = boxRitem-&gt;Geo-&gt;DrawArgs[<span class="stringliteral">&quot;box&quot;</span>].IndexCount;  <span class="comment">//36</span></div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    boxRitem-&gt;StartIndexLocation = boxRitem-&gt;Geo-&gt;DrawArgs[<span class="stringliteral">&quot;box&quot;</span>].StartIndexLocation; <span class="comment">//0</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    boxRitem-&gt;BaseVertexLocation = boxRitem-&gt;Geo-&gt;DrawArgs[<span class="stringliteral">&quot;box&quot;</span>].BaseVertexLocation; <span class="comment">//0</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    <a class="code hl_variable" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">mAllRitems</a>.push_back(std::move(boxRitem));</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span> </div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span> </div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>    <span class="comment">// All the render items are opaque.</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="comment">//Our application will maintain lists of render items based on how they need to be</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    <span class="comment">//drawn; that is, render items that need different PSOs will be kept in different lists.</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; e : <a class="code hl_variable" href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">mAllRitems</a>)</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        <a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>.push_back(e.get());</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>}</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno"><a class="line" href="class_shapes_app.html#a23329cb596c4227bc0c51c5466e9d0ee">  751</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_shapes_app.html#a23329cb596c4227bc0c51c5466e9d0ee">ShapesApp::DrawRenderItems</a>(ID3D12GraphicsCommandList* cmdList, <span class="keyword">const</span> std::vector&lt;RenderItem*&gt;&amp; ritems)</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>{</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    UINT objCBByteSize = <a class="code hl_function" href="classd3d_util.html#a0883e0848cae813b2bc71570f3303e92">d3dUtil::CalcConstantBufferByteSize</a>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_object_constants.html">ObjectConstants</a>));</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <span class="keyword">auto</span> objectCB = <a class="code hl_variable" href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">mCurrFrameResource</a>-&gt;<a class="code hl_variable" href="struct_frame_resource.html#ad1c8bf68d9fe27c0bf5224057fe42b14">ObjectCB</a>-&gt;Resource();</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span> </div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    <span class="comment">// For each render item...</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; ritems.size(); ++i)</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>        <span class="keyword">auto</span> ri = ritems[i];</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span> </div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        cmdList-&gt;IASetVertexBuffers(0, 1, &amp;ri-&gt;Geo-&gt;VertexBufferView());</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        cmdList-&gt;IASetIndexBuffer(&amp;ri-&gt;Geo-&gt;IndexBufferView());</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        cmdList-&gt;IASetPrimitiveTopology(ri-&gt;PrimitiveType);</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <span class="comment">// Offset to the CBV in the descriptor heap for this object and for this frame resource.</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        UINT cbvIndex = <a class="code hl_variable" href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">mCurrFrameResourceIndex</a> * (UINT)<a class="code hl_variable" href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">mOpaqueRitems</a>.size() + ri-&gt;ObjCBIndex;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>        <span class="keyword">auto</span> cbvHandle = CD3DX12_GPU_DESCRIPTOR_HANDLE(<a class="code hl_variable" href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">mCbvHeap</a>-&gt;GetGPUDescriptorHandleForHeapStart());</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        cbvHandle.Offset(cbvIndex, <a class="code hl_variable" href="class_d3_d_app.html#a0e084fa045c8e46d65a37889ff5d307d">mCbvSrvUavDescriptorSize</a>);</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span> </div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        cmdList-&gt;SetGraphicsRootDescriptorTable(0, cbvHandle);</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span> </div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>        cmdList-&gt;DrawIndexedInstanced(ri-&gt;IndexCount, 1, ri-&gt;StartIndexLocation, ri-&gt;BaseVertexLocation, 0);</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    }</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>}</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span> </div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="ttc" id="a_week4-1-_box_using_frame_resources_8cpp_html_a7c82b7821d2662eb6e0cfdc08a6c4bd4"><div class="ttname"><a href="_week4-1-_box_using_frame_resources_8cpp.html#a7c82b7821d2662eb6e0cfdc08a6c4bd4">gNumFrameResources</a></div><div class="ttdeci">const int gNumFrameResources</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00021">Week4-1-BoxUsingFrameResources.cpp:21</a></div></div>
<div class="ttc" id="a_week4-1-_box_using_frame_resources_8cpp_html_aabcda87589d774901aa87061b8fd0176"><div class="ttname"><a href="_week4-1-_box_using_frame_resources_8cpp.html#aabcda87589d774901aa87061b8fd0176">WinMain</a></div><div class="ttdeci">int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE prevInstance, PSTR cmdLine, int showCmd)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00145">Week4-1-BoxUsingFrameResources.cpp:145</a></div></div>
<div class="ttc" id="a_week9_2_trinagle_tessellation_2_frame_resource_8h_html"><div class="ttname"><a href="_week9_2_trinagle_tessellation_2_frame_resource_8h.html">FrameResource.h</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html"><div class="ttname"><a href="class_d3_d_app.html">D3DApp</a></div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00018">d3dApp.h:19</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a025509339d4e0ec2781a8deb9d4218cc"><div class="ttname"><a href="class_d3_d_app.html#a025509339d4e0ec2781a8deb9d4218cc">D3DApp::mBackBufferFormat</a></div><div class="ttdeci">DXGI_FORMAT mBackBufferFormat</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00121">d3dApp.h:121</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a0a2ed8f09bb1ae3a97f3b9a5067c905f"><div class="ttname"><a href="class_d3_d_app.html#a0a2ed8f09bb1ae3a97f3b9a5067c905f">D3DApp::Run</a></div><div class="ttdeci">int Run()</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00072">d3dApp.cpp:72</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a0e084fa045c8e46d65a37889ff5d307d"><div class="ttname"><a href="class_d3_d_app.html#a0e084fa045c8e46d65a37889ff5d307d">D3DApp::mCbvSrvUavDescriptorSize</a></div><div class="ttdeci">UINT mCbvSrvUavDescriptorSize</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00116">d3dApp.h:116</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a15b84b7e76f6c705196dd6b4b5ad418d"><div class="ttname"><a href="class_d3_d_app.html#a15b84b7e76f6c705196dd6b4b5ad418d">D3DApp::md3dDevice</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12Device &gt; md3dDevice</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00094">d3dApp.h:94</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a2d2bfecf16e881f1d65f464767d38c12"><div class="ttname"><a href="class_d3_d_app.html#a2d2bfecf16e881f1d65f464767d38c12">D3DApp::DepthStencilView</a></div><div class="ttdeci">D3D12_CPU_DESCRIPTOR_HANDLE DepthStencilView() const</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00586">d3dApp.cpp:586</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a3d515a557287c1a8f8fcc60abc839e84"><div class="ttname"><a href="class_d3_d_app.html#a3d515a557287c1a8f8fcc60abc839e84">D3DApp::mCommandList</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12GraphicsCommandList &gt; mCommandList</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00101">d3dApp.h:101</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a3f9dae9800854a7aae8a9ca8677a4d4f"><div class="ttname"><a href="class_d3_d_app.html#a3f9dae9800854a7aae8a9ca8677a4d4f">D3DApp::mClientWidth</a></div><div class="ttdeci">int mClientWidth</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00123">d3dApp.h:123</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a4c1b99cd01576c413d3a50d1435f1b8a"><div class="ttname"><a href="class_d3_d_app.html#a4c1b99cd01576c413d3a50d1435f1b8a">D3DApp::OnResize</a></div><div class="ttdeci">virtual void OnResize()</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00141">d3dApp.cpp:141</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a6cbfb6c8fcc5edec4fb82aacaadf7fbb"><div class="ttname"><a href="class_d3_d_app.html#a6cbfb6c8fcc5edec4fb82aacaadf7fbb">D3DApp::m4xMsaaState</a></div><div class="ttdeci">bool m4xMsaaState</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00086">d3dApp.h:86</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a851376059fec11e3a6d7535785c5d8cd"><div class="ttname"><a href="class_d3_d_app.html#a851376059fec11e3a6d7535785c5d8cd">D3DApp::CurrentBackBuffer</a></div><div class="ttdeci">ID3D12Resource * CurrentBackBuffer() const</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00573">d3dApp.cpp:573</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a90597e8c2902073536b6609864eaf160"><div class="ttname"><a href="class_d3_d_app.html#a90597e8c2902073536b6609864eaf160">D3DApp::mFence</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12Fence &gt; mFence</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00096">d3dApp.h:96</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a961fa79170dcbde858923a5250c322be"><div class="ttname"><a href="class_d3_d_app.html#a961fa79170dcbde858923a5250c322be">D3DApp::Initialize</a></div><div class="ttdeci">virtual bool Initialize()</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00107">d3dApp.cpp:107</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_a96ae78a6cf93ec91272032890ef65440"><div class="ttname"><a href="class_d3_d_app.html#a96ae78a6cf93ec91272032890ef65440">D3DApp::mCommandQueue</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12CommandQueue &gt; mCommandQueue</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00099">d3dApp.h:99</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ab0ef1ea8fcb85251dcd6d603a4090d62"><div class="ttname"><a href="class_d3_d_app.html#ab0ef1ea8fcb85251dcd6d603a4090d62">D3DApp::mCurrBackBuffer</a></div><div class="ttdeci">int mCurrBackBuffer</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00104">d3dApp.h:104</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ab86744c66c883d3815c5d08107b16408"><div class="ttname"><a href="class_d3_d_app.html#ab86744c66c883d3815c5d08107b16408">D3DApp::mScreenViewport</a></div><div class="ttdeci">D3D12_VIEWPORT mScreenViewport</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00111">d3dApp.h:111</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ab8cf74904b14c4a2072fc020c9bc4d22"><div class="ttname"><a href="class_d3_d_app.html#ab8cf74904b14c4a2072fc020c9bc4d22">D3DApp::AspectRatio</a></div><div class="ttdeci">float AspectRatio() const</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00050">d3dApp.cpp:50</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ac796a8fcd1a1af0e4665e221af6981d4"><div class="ttname"><a href="class_d3_d_app.html#ac796a8fcd1a1af0e4665e221af6981d4">D3DApp::CurrentBackBufferView</a></div><div class="ttdeci">D3D12_CPU_DESCRIPTOR_HANDLE CurrentBackBufferView() const</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00578">d3dApp.cpp:578</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_acc7041db5dcaaa0d76ed263c55d1c6b2"><div class="ttname"><a href="class_d3_d_app.html#acc7041db5dcaaa0d76ed263c55d1c6b2">D3DApp::mCurrentFence</a></div><div class="ttdeci">UINT64 mCurrentFence</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00097">d3dApp.h:97</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ad54b6af44b0c13b645f363d849230d51"><div class="ttname"><a href="class_d3_d_app.html#ad54b6af44b0c13b645f363d849230d51">D3DApp::mClientHeight</a></div><div class="ttdeci">int mClientHeight</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00124">d3dApp.h:124</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_adac97bdf38a37003abbbd7d39c2a75fb"><div class="ttname"><a href="class_d3_d_app.html#adac97bdf38a37003abbbd7d39c2a75fb">D3DApp::mSwapChain</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; IDXGISwapChain &gt; mSwapChain</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00093">d3dApp.h:93</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_adbf6e2922df9e6545390049968715547"><div class="ttname"><a href="class_d3_d_app.html#adbf6e2922df9e6545390049968715547">D3DApp::mScissorRect</a></div><div class="ttdeci">D3D12_RECT mScissorRect</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00112">d3dApp.h:112</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ae00420d2e3d8305821a1a95ebc1b00bb"><div class="ttname"><a href="class_d3_d_app.html#ae00420d2e3d8305821a1a95ebc1b00bb">D3DApp::mDirectCmdListAlloc</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12CommandAllocator &gt; mDirectCmdListAlloc</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00100">d3dApp.h:100</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_ae68879f7a2cf2b770b1015ab9c0f14e5"><div class="ttname"><a href="class_d3_d_app.html#ae68879f7a2cf2b770b1015ab9c0f14e5">D3DApp::mhMainWnd</a></div><div class="ttdeci">HWND mhMainWnd</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00078">d3dApp.h:78</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_af2441a306c7f369256983c4f5f43395a"><div class="ttname"><a href="class_d3_d_app.html#af2441a306c7f369256983c4f5f43395a">D3DApp::mDepthStencilFormat</a></div><div class="ttdeci">DXGI_FORMAT mDepthStencilFormat</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00122">d3dApp.h:122</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_af4cd47b4bb3b28e1013e861355baf8e8"><div class="ttname"><a href="class_d3_d_app.html#af4cd47b4bb3b28e1013e861355baf8e8">D3DApp::SwapChainBufferCount</a></div><div class="ttdeci">static const int SwapChainBufferCount</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00103">d3dApp.h:103</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_afb28a606eca768c1bb6cdc2109683dc7"><div class="ttname"><a href="class_d3_d_app.html#afb28a606eca768c1bb6cdc2109683dc7">D3DApp::m4xMsaaQuality</a></div><div class="ttdeci">UINT m4xMsaaQuality</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8h_source.html#l00087">d3dApp.h:87</a></div></div>
<div class="ttc" id="aclass_d3_d_app_html_afd141907db51f0c177ab89955e9d5de9"><div class="ttname"><a href="class_d3_d_app.html#afd141907db51f0c177ab89955e9d5de9">D3DApp::FlushCommandQueue</a></div><div class="ttdeci">void FlushCommandQueue()</div><div class="ttdef"><b>Definition:</b> <a href="d3d_app_8cpp_source.html#l00547">d3dApp.cpp:547</a></div></div>
<div class="ttc" id="aclass_dx_exception_html"><div class="ttname"><a href="class_dx_exception.html">DxException</a></div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00127">d3dUtil.h:128</a></div></div>
<div class="ttc" id="aclass_dx_exception_html_a031a5ff549f043decbe96093e73dac27"><div class="ttname"><a href="class_dx_exception.html#a031a5ff549f043decbe96093e73dac27">DxException::ToString</a></div><div class="ttdeci">std::wstring ToString() const</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8cpp_source.html#l00116">d3dUtil.cpp:116</a></div></div>
<div class="ttc" id="aclass_game_timer_html"><div class="ttname"><a href="class_game_timer.html">GameTimer</a></div><div class="ttdef"><b>Definition:</b> <a href="_common_2_game_timer_8h_source.html#l00008">GameTimer.h:9</a></div></div>
<div class="ttc" id="aclass_game_timer_html_a4d51c259eeb170d1841f84f41779592d"><div class="ttname"><a href="class_game_timer.html#a4d51c259eeb170d1841f84f41779592d">GameTimer::TotalTime</a></div><div class="ttdeci">float TotalTime() const</div><div class="ttdef"><b>Definition:</b> <a href="_common_2_game_timer_8cpp_source.html#l00019">GameTimer.cpp:19</a></div></div>
<div class="ttc" id="aclass_game_timer_html_a67d0ce60fa40d5ff728d101fc31e30f6"><div class="ttname"><a href="class_game_timer.html#a67d0ce60fa40d5ff728d101fc31e30f6">GameTimer::DeltaTime</a></div><div class="ttdeci">float DeltaTime() const</div><div class="ttdef"><b>Definition:</b> <a href="_common_2_game_timer_8cpp_source.html#l00051">GameTimer.cpp:51</a></div></div>
<div class="ttc" id="aclass_geometry_generator_html"><div class="ttname"><a href="class_geometry_generator.html">GeometryGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8h_source.html#l00021">GeometryGenerator.h:22</a></div></div>
<div class="ttc" id="aclass_geometry_generator_html_a9ebf88d1bee287c6e211bff43fbdd3a0"><div class="ttname"><a href="class_geometry_generator.html#a9ebf88d1bee287c6e211bff43fbdd3a0">GeometryGenerator::CreateBox</a></div><div class="ttdeci">MeshData CreateBox(float width, float height, float depth, uint32 numSubdivisions)</div><div class="ttdoc">summary&gt; Creates a sphere centered at the origin with the given radius.</div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8cpp_source.html#l00010">GeometryGenerator.cpp:10</a></div></div>
<div class="ttc" id="aclass_math_helper_html_a11e988eb2e34337e333972e5fd3b5dba"><div class="ttname"><a href="class_math_helper.html#a11e988eb2e34337e333972e5fd3b5dba">MathHelper::Pi</a></div><div class="ttdeci">static const float Pi</div><div class="ttdef"><b>Definition:</b> <a href="_common_2_math_helper_8h_source.html#l00096">MathHelper.h:96</a></div></div>
<div class="ttc" id="aclass_math_helper_html_a68b4e9af95b1a36aad30ea80839f6b19"><div class="ttname"><a href="class_math_helper.html#a68b4e9af95b1a36aad30ea80839f6b19">MathHelper::Identity4x4</a></div><div class="ttdeci">static DirectX::XMFLOAT4X4 Identity4x4()</div><div class="ttdef"><b>Definition:</b> <a href="_common_2_math_helper_8h_source.html#l00081">MathHelper.h:81</a></div></div>
<div class="ttc" id="aclass_math_helper_html_af659fe642c374ff42247e25e887ae816"><div class="ttname"><a href="class_math_helper.html#af659fe642c374ff42247e25e887ae816">MathHelper::Clamp</a></div><div class="ttdeci">static T Clamp(const T &amp;x, const T &amp;low, const T &amp;high)</div><div class="ttdef"><b>Definition:</b> <a href="_common_2_math_helper_8h_source.html#l00052">MathHelper.h:52</a></div></div>
<div class="ttc" id="aclass_shapes_app_html"><div class="ttname"><a href="class_shapes_app.html">ShapesApp</a></div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00055">Week4-1-BoxUsingFrameResources.cpp:56</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a0064b6ed1df7afaff9bba72caa3bc247"><div class="ttname"><a href="class_shapes_app.html#a0064b6ed1df7afaff9bba72caa3bc247">ShapesApp::mPSOs</a></div><div class="ttdeci">std::unordered_map&lt; std::string, ComPtr&lt; ID3D12PipelineState &gt; &gt; mPSOs</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00106">Week4-1-BoxUsingFrameResources.cpp:106</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a0853eb3e179d364d3a8b9b6f201aa69a"><div class="ttname"><a href="class_shapes_app.html#a0853eb3e179d364d3a8b9b6f201aa69a">ShapesApp::BuildDescriptorHeaps</a></div><div class="ttdeci">void BuildDescriptorHeaps()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00467">Week4-1-BoxUsingFrameResources.cpp:467</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a0c45571476d6aa46a50a926b924face2"><div class="ttname"><a href="class_shapes_app.html#a0c45571476d6aa46a50a926b924face2">ShapesApp::operator=</a></div><div class="ttdeci">ShapesApp &amp; operator=(const ShapesApp &amp;rhs)=delete</div></div>
<div class="ttc" id="aclass_shapes_app_html_a0e58080351e7a4f93677f5795f1e271f"><div class="ttname"><a href="class_shapes_app.html#a0e58080351e7a4f93677f5795f1e271f">ShapesApp::BuildRootSignature</a></div><div class="ttdeci">void BuildRootSignature()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00538">Week4-1-BoxUsingFrameResources.cpp:538</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a1c9aec35d50a86c0b15618dc8a28b5e0"><div class="ttname"><a href="class_shapes_app.html#a1c9aec35d50a86c0b15618dc8a28b5e0">ShapesApp::UpdateObjectCBs</a></div><div class="ttdeci">void UpdateObjectCBs(const GameTimer &amp;gt)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00415">Week4-1-BoxUsingFrameResources.cpp:415</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a20483a75ea79534e63bc76e538d9dbdf"><div class="ttname"><a href="class_shapes_app.html#a20483a75ea79534e63bc76e538d9dbdf">ShapesApp::mCurrFrameResourceIndex</a></div><div class="ttdeci">int mCurrFrameResourceIndex</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00097">Week4-1-BoxUsingFrameResources.cpp:97</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a22b43f1fcd3aaf4b33a74580ea22907f"><div class="ttname"><a href="class_shapes_app.html#a22b43f1fcd3aaf4b33a74580ea22907f">ShapesApp::mRootSignature</a></div><div class="ttdeci">ComPtr&lt; ID3D12RootSignature &gt; mRootSignature</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00099">Week4-1-BoxUsingFrameResources.cpp:99</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a22ba18409fe2b80eed4a9a20d08903d3"><div class="ttname"><a href="class_shapes_app.html#a22ba18409fe2b80eed4a9a20d08903d3">ShapesApp::mCbvHeap</a></div><div class="ttdeci">ComPtr&lt; ID3D12DescriptorHeap &gt; mCbvHeap</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00100">Week4-1-BoxUsingFrameResources.cpp:100</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a23329cb596c4227bc0c51c5466e9d0ee"><div class="ttname"><a href="class_shapes_app.html#a23329cb596c4227bc0c51c5466e9d0ee">ShapesApp::DrawRenderItems</a></div><div class="ttdeci">void DrawRenderItems(ID3D12GraphicsCommandList *cmdList, const std::vector&lt; RenderItem * &gt; &amp;ritems)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00751">Week4-1-BoxUsingFrameResources.cpp:751</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a2996a74a07adb81380fdd27f8300bf29"><div class="ttname"><a href="class_shapes_app.html#a2996a74a07adb81380fdd27f8300bf29">ShapesApp::mFrameResources</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; FrameResource &gt; &gt; mFrameResources</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00095">Week4-1-BoxUsingFrameResources.cpp:95</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a2b506b514895ae3646e28d8cf70d4874"><div class="ttname"><a href="class_shapes_app.html#a2b506b514895ae3646e28d8cf70d4874">ShapesApp::BuildFrameResources</a></div><div class="ttdeci">void BuildFrameResources()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00722">Week4-1-BoxUsingFrameResources.cpp:722</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a2eddb75b23c304357dbf73a02c7819d0"><div class="ttname"><a href="class_shapes_app.html#a2eddb75b23c304357dbf73a02c7819d0">ShapesApp::mOpaqueRitems</a></div><div class="ttdeci">std::vector&lt; RenderItem * &gt; mOpaqueRitems</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00117">Week4-1-BoxUsingFrameResources.cpp:117</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a3e68fb9a3eafd0dc21e8ef5a2990465e"><div class="ttname"><a href="class_shapes_app.html#a3e68fb9a3eafd0dc21e8ef5a2990465e">ShapesApp::Update</a></div><div class="ttdeci">virtual void Update(const GameTimer &amp;gt) override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00221">Week4-1-BoxUsingFrameResources.cpp:221</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a3eee3362424da7fe3078c531fb55c872"><div class="ttname"><a href="class_shapes_app.html#a3eee3362424da7fe3078c531fb55c872">ShapesApp::mPhi</a></div><div class="ttdeci">float mPhi</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00139">Week4-1-BoxUsingFrameResources.cpp:139</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a41ed5981e7d106b80661e1aacdf4192f"><div class="ttname"><a href="class_shapes_app.html#a41ed5981e7d106b80661e1aacdf4192f">ShapesApp::OnResize</a></div><div class="ttdeci">virtual void OnResize() override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00207">Week4-1-BoxUsingFrameResources.cpp:207</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a451df0174906b422802621261885216a"><div class="ttname"><a href="class_shapes_app.html#a451df0174906b422802621261885216a">ShapesApp::OnKeyboardInput</a></div><div class="ttdeci">void OnKeyboardInput(const GameTimer &amp;gt)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00384">Week4-1-BoxUsingFrameResources.cpp:384</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a4f559633c503b0d95087a25415bedc1e"><div class="ttname"><a href="class_shapes_app.html#a4f559633c503b0d95087a25415bedc1e">ShapesApp::mLastMousePos</a></div><div class="ttdeci">POINT mLastMousePos</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00142">Week4-1-BoxUsingFrameResources.cpp:142</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a4fd4f7f8638217cb724b2154ad59dbb9"><div class="ttname"><a href="class_shapes_app.html#a4fd4f7f8638217cb724b2154ad59dbb9">ShapesApp::BuildConstantBufferViews</a></div><div class="ttdeci">void BuildConstantBufferViews()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00487">Week4-1-BoxUsingFrameResources.cpp:487</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a52cd1469a3c1278e6012ced00fa071be"><div class="ttname"><a href="class_shapes_app.html#a52cd1469a3c1278e6012ced00fa071be">ShapesApp::mPassCbvOffset</a></div><div class="ttdeci">UINT mPassCbvOffset</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00130">Week4-1-BoxUsingFrameResources.cpp:130</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a66b14853049f046ff73e944bbb3b5c79"><div class="ttname"><a href="class_shapes_app.html#a66b14853049f046ff73e944bbb3b5c79">ShapesApp::mShaders</a></div><div class="ttdeci">std::unordered_map&lt; std::string, ComPtr&lt; ID3DBlob &gt; &gt; mShaders</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00105">Week4-1-BoxUsingFrameResources.cpp:105</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a7677a2e3525c70b75fe7b9bbf3a55af8"><div class="ttname"><a href="class_shapes_app.html#a7677a2e3525c70b75fe7b9bbf3a55af8">ShapesApp::ShapesApp</a></div><div class="ttdeci">ShapesApp(HINSTANCE hInstance)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00168">Week4-1-BoxUsingFrameResources.cpp:168</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a79b24d2ad45056b3ef4394ed23670cc8"><div class="ttname"><a href="class_shapes_app.html#a79b24d2ad45056b3ef4394ed23670cc8">ShapesApp::OnMouseDown</a></div><div class="ttdeci">virtual void OnMouseDown(WPARAM btnState, int x, int y) override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00339">Week4-1-BoxUsingFrameResources.cpp:339</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a8219bebe3bc2a2d9301cafe784a7bad7"><div class="ttname"><a href="class_shapes_app.html#a8219bebe3bc2a2d9301cafe784a7bad7">ShapesApp::Draw</a></div><div class="ttdeci">virtual void Draw(const GameTimer &amp;gt) override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00249">Week4-1-BoxUsingFrameResources.cpp:249</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a8252e389a8873922dcf03597119724d6"><div class="ttname"><a href="class_shapes_app.html#a8252e389a8873922dcf03597119724d6">ShapesApp::mIsWireframe</a></div><div class="ttdeci">bool mIsWireframe</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00132">Week4-1-BoxUsingFrameResources.cpp:132</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a83848a24eeb20b656d86db6d33392c55"><div class="ttname"><a href="class_shapes_app.html#a83848a24eeb20b656d86db6d33392c55">ShapesApp::mTheta</a></div><div class="ttdeci">float mTheta</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00138">Week4-1-BoxUsingFrameResources.cpp:138</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a848dbf65b387b3dbf0e6d0e186627046"><div class="ttname"><a href="class_shapes_app.html#a848dbf65b387b3dbf0e6d0e186627046">ShapesApp::~ShapesApp</a></div><div class="ttdeci">~ShapesApp()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00173">Week4-1-BoxUsingFrameResources.cpp:173</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a8b45dd95e79927dd2fa4a0df55f777be"><div class="ttname"><a href="class_shapes_app.html#a8b45dd95e79927dd2fa4a0df55f777be">ShapesApp::mSrvDescriptorHeap</a></div><div class="ttdeci">ComPtr&lt; ID3D12DescriptorHeap &gt; mSrvDescriptorHeap</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00102">Week4-1-BoxUsingFrameResources.cpp:102</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a8f04fd823611fac3380e07f1b83e9348"><div class="ttname"><a href="class_shapes_app.html#a8f04fd823611fac3380e07f1b83e9348">ShapesApp::Initialize</a></div><div class="ttdeci">virtual bool Initialize() override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00179">Week4-1-BoxUsingFrameResources.cpp:179</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a90f2349286b9eaa95f5a138ceb3108bf"><div class="ttname"><a href="class_shapes_app.html#a90f2349286b9eaa95f5a138ceb3108bf">ShapesApp::OnMouseUp</a></div><div class="ttdeci">virtual void OnMouseUp(WPARAM btnState, int x, int y) override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00347">Week4-1-BoxUsingFrameResources.cpp:347</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a9ce73ff59d60fe60598317d88f4025ff"><div class="ttname"><a href="class_shapes_app.html#a9ce73ff59d60fe60598317d88f4025ff">ShapesApp::mMainPassCB</a></div><div class="ttdeci">PassConstants mMainPassCB</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00128">Week4-1-BoxUsingFrameResources.cpp:128</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a9f2f63fde65f034d23ac949ccb31a9f0"><div class="ttname"><a href="class_shapes_app.html#a9f2f63fde65f034d23ac949ccb31a9f0">ShapesApp::mProj</a></div><div class="ttdeci">XMFLOAT4X4 mProj</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00136">Week4-1-BoxUsingFrameResources.cpp:136</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_a9feb93c660599744688b0b6460f15c21"><div class="ttname"><a href="class_shapes_app.html#a9feb93c660599744688b0b6460f15c21">ShapesApp::mView</a></div><div class="ttdeci">XMFLOAT4X4 mView</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00135">Week4-1-BoxUsingFrameResources.cpp:135</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_aa3c11cd1756c95385229b02dc17a867a"><div class="ttname"><a href="class_shapes_app.html#aa3c11cd1756c95385229b02dc17a867a">ShapesApp::OnMouseMove</a></div><div class="ttdeci">virtual void OnMouseMove(WPARAM btnState, int x, int y) override</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00352">Week4-1-BoxUsingFrameResources.cpp:352</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_aa69b02a912ec9652b33e0fa42b299931"><div class="ttname"><a href="class_shapes_app.html#aa69b02a912ec9652b33e0fa42b299931">ShapesApp::BuildRenderItems</a></div><div class="ttdeci">void BuildRenderItems()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00731">Week4-1-BoxUsingFrameResources.cpp:731</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_aa6dbfd4be3e08bc9e70dd72998c68546"><div class="ttname"><a href="class_shapes_app.html#aa6dbfd4be3e08bc9e70dd72998c68546">ShapesApp::BuildShadersAndInputLayout</a></div><div class="ttdeci">void BuildShadersAndInputLayout()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00582">Week4-1-BoxUsingFrameResources.cpp:582</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_aa7153fb7c2f9f54b990e51ac7cde6d33"><div class="ttname"><a href="class_shapes_app.html#aa7153fb7c2f9f54b990e51ac7cde6d33">ShapesApp::mAllRitems</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; RenderItem &gt; &gt; mAllRitems</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00111">Week4-1-BoxUsingFrameResources.cpp:111</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ab1776e2a52226246d4fea1aa6eaab014"><div class="ttname"><a href="class_shapes_app.html#ab1776e2a52226246d4fea1aa6eaab014">ShapesApp::BuildPSOs</a></div><div class="ttdeci">void BuildPSOs()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00676">Week4-1-BoxUsingFrameResources.cpp:676</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ab1b4fcac4358fb4e0614bdb7558447d7"><div class="ttname"><a href="class_shapes_app.html#ab1b4fcac4358fb4e0614bdb7558447d7">ShapesApp::mInputLayout</a></div><div class="ttdeci">std::vector&lt; D3D12_INPUT_ELEMENT_DESC &gt; mInputLayout</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00108">Week4-1-BoxUsingFrameResources.cpp:108</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ab595d78dc0d39992193ef67988fd2730"><div class="ttname"><a href="class_shapes_app.html#ab595d78dc0d39992193ef67988fd2730">ShapesApp::mGeometries</a></div><div class="ttdeci">std::unordered_map&lt; std::string, std::unique_ptr&lt; MeshGeometry &gt; &gt; mGeometries</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00104">Week4-1-BoxUsingFrameResources.cpp:104</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_abd8bcc3bf3d96a70efba3ac17ce01245"><div class="ttname"><a href="class_shapes_app.html#abd8bcc3bf3d96a70efba3ac17ce01245">ShapesApp::UpdateCamera</a></div><div class="ttdeci">void UpdateCamera(const GameTimer &amp;gt)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00398">Week4-1-BoxUsingFrameResources.cpp:398</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_abfabb159343e3704787becf51554b296"><div class="ttname"><a href="class_shapes_app.html#abfabb159343e3704787becf51554b296">ShapesApp::BuildShapeGeometry</a></div><div class="ttdeci">void BuildShapeGeometry()</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00595">Week4-1-BoxUsingFrameResources.cpp:595</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_abfd74b6ff2d0c6e724b1fc9f9569bdcf"><div class="ttname"><a href="class_shapes_app.html#abfd74b6ff2d0c6e724b1fc9f9569bdcf">ShapesApp::UpdateMainPassCB</a></div><div class="ttdeci">void UpdateMainPassCB(const GameTimer &amp;gt)</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00439">Week4-1-BoxUsingFrameResources.cpp:439</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ac639c75c0d00d1fb5450c7d8901b2b1b"><div class="ttname"><a href="class_shapes_app.html#ac639c75c0d00d1fb5450c7d8901b2b1b">ShapesApp::mEyePos</a></div><div class="ttdeci">XMFLOAT3 mEyePos</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00134">Week4-1-BoxUsingFrameResources.cpp:134</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ad686b551210f0ff1936f10493979a85a"><div class="ttname"><a href="class_shapes_app.html#ad686b551210f0ff1936f10493979a85a">ShapesApp::mCurrFrameResource</a></div><div class="ttdeci">FrameResource * mCurrFrameResource</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00096">Week4-1-BoxUsingFrameResources.cpp:96</a></div></div>
<div class="ttc" id="aclass_shapes_app_html_ada5ae7c0ce97f4046065bff3741c1450"><div class="ttname"><a href="class_shapes_app.html#ada5ae7c0ce97f4046065bff3741c1450">ShapesApp::ShapesApp</a></div><div class="ttdeci">ShapesApp(const ShapesApp &amp;rhs)=delete</div></div>
<div class="ttc" id="aclass_shapes_app_html_afbf7cfba6f1ed2475bfc654b2921f8a0"><div class="ttname"><a href="class_shapes_app.html#afbf7cfba6f1ed2475bfc654b2921f8a0">ShapesApp::mRadius</a></div><div class="ttdeci">float mRadius</div><div class="ttdef"><b>Definition:</b> <a href="_week4-1-_box_using_frame_resources_8cpp_source.html#l00140">Week4-1-BoxUsingFrameResources.cpp:140</a></div></div>
<div class="ttc" id="aclassd3d_util_html_a0883e0848cae813b2bc71570f3303e92"><div class="ttname"><a href="classd3d_util.html#a0883e0848cae813b2bc71570f3303e92">d3dUtil::CalcConstantBufferByteSize</a></div><div class="ttdeci">static UINT CalcConstantBufferByteSize(UINT byteSize)</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00095">d3dUtil.h:95</a></div></div>
<div class="ttc" id="aclassd3d_util_html_acac6acd838913d63466e4f0159bfe8b0"><div class="ttname"><a href="classd3d_util.html#acac6acd838913d63466e4f0159bfe8b0">d3dUtil::CompileShader</a></div><div class="ttdeci">static Microsoft::WRL::ComPtr&lt; ID3DBlob &gt; CompileShader(const std::wstring &amp;filename, const D3D_SHADER_MACRO *defines, const std::string &amp;entrypoint, const std::string &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8cpp_source.html#l00090">d3dUtil.cpp:90</a></div></div>
<div class="ttc" id="aclassd3d_util_html_ae4a68e5b73f032619ee5c2db64f57899"><div class="ttname"><a href="classd3d_util.html#ae4a68e5b73f032619ee5c2db64f57899">d3dUtil::CreateDefaultBuffer</a></div><div class="ttdeci">static Microsoft::WRL::ComPtr&lt; ID3D12Resource &gt; CreateDefaultBuffer(ID3D12Device *device, ID3D12GraphicsCommandList *cmdList, const void *initData, UINT64 byteSize, Microsoft::WRL::ComPtr&lt; ID3D12Resource &gt; &amp;uploadBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8cpp_source.html#l00038">d3dUtil.cpp:38</a></div></div>
<div class="ttc" id="ad3d_util_8h_html_af3892d76181a8a44edbd1a71a6ae9b97"><div class="ttname"><a href="d3d_util_8h.html#af3892d76181a8a44edbd1a71a6ae9b97">ThrowIfFailed</a></div><div class="ttdeci">#define ThrowIfFailed(x)</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00306">d3dUtil.h:306</a></div></div>
<div class="ttc" id="anamespace_direct_x_html"><div class="ttname"><a href="namespace_direct_x.html">DirectX</a></div><div class="ttdef"><b>Definition:</b> <a href="_d_d_s_texture_loader_8h_source.html#l00047">DDSTextureLoader.h:48</a></div></div>
<div class="ttc" id="astruct_frame_resource_html"><div class="ttname"><a href="struct_frame_resource.html">FrameResource</a></div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00072">FrameResource.h:73</a></div></div>
<div class="ttc" id="astruct_frame_resource_html_a291715f4e38eed237d9799daee6d062b"><div class="ttname"><a href="struct_frame_resource.html#a291715f4e38eed237d9799daee6d062b">FrameResource::CmdListAlloc</a></div><div class="ttdeci">Microsoft::WRL::ComPtr&lt; ID3D12CommandAllocator &gt; CmdListAlloc</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00083">FrameResource.h:83</a></div></div>
<div class="ttc" id="astruct_frame_resource_html_a9a85cb113dec7553de94ae579bd0b770"><div class="ttname"><a href="struct_frame_resource.html#a9a85cb113dec7553de94ae579bd0b770">FrameResource::PassCB</a></div><div class="ttdeci">std::unique_ptr&lt; UploadBuffer&lt; PassConstants &gt; &gt; PassCB</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00087">FrameResource.h:87</a></div></div>
<div class="ttc" id="astruct_frame_resource_html_aa90bdd44edbdbebf156b7cdb01437b8a"><div class="ttname"><a href="struct_frame_resource.html#aa90bdd44edbdbebf156b7cdb01437b8a">FrameResource::Fence</a></div><div class="ttdeci">UINT64 Fence</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00094">FrameResource.h:94</a></div></div>
<div class="ttc" id="astruct_frame_resource_html_ad1c8bf68d9fe27c0bf5224057fe42b14"><div class="ttname"><a href="struct_frame_resource.html#ad1c8bf68d9fe27c0bf5224057fe42b14">FrameResource::ObjectCB</a></div><div class="ttdeci">std::unique_ptr&lt; UploadBuffer&lt; ObjectConstants &gt; &gt; ObjectCB</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00088">FrameResource.h:88</a></div></div>
<div class="ttc" id="astruct_geometry_generator_1_1_mesh_data_html"><div class="ttname"><a href="struct_geometry_generator_1_1_mesh_data.html">GeometryGenerator::MeshData</a></div><div class="ttdoc">summary&gt; Creates a box centered at the origin with the given dimensions, where each face has m rows a...</div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8h_source.html#l00056">GeometryGenerator.h:57</a></div></div>
<div class="ttc" id="astruct_geometry_generator_1_1_mesh_data_html_a2a85f97f9a84b4f68d71cdcd41a7198b"><div class="ttname"><a href="struct_geometry_generator_1_1_mesh_data.html#a2a85f97f9a84b4f68d71cdcd41a7198b">GeometryGenerator::MeshData::Vertices</a></div><div class="ttdeci">std::vector&lt; Vertex &gt; Vertices</div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8h_source.html#l00058">GeometryGenerator.h:58</a></div></div>
<div class="ttc" id="astruct_geometry_generator_1_1_mesh_data_html_a905f88aa2c83239ed6887f8dd9bcbf52"><div class="ttname"><a href="struct_geometry_generator_1_1_mesh_data.html#a905f88aa2c83239ed6887f8dd9bcbf52">GeometryGenerator::MeshData::GetIndices16</a></div><div class="ttdeci">std::vector&lt; uint16 &gt; &amp; GetIndices16()</div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8h_source.html#l00061">GeometryGenerator.h:61</a></div></div>
<div class="ttc" id="astruct_geometry_generator_1_1_mesh_data_html_af32ad2f27a3c6c78700f726050e2eb73"><div class="ttname"><a href="struct_geometry_generator_1_1_mesh_data.html#af32ad2f27a3c6c78700f726050e2eb73">GeometryGenerator::MeshData::Indices32</a></div><div class="ttdeci">std::vector&lt; uint32 &gt; Indices32</div><div class="ttdef"><b>Definition:</b> <a href="_geometry_generator_8h_source.html#l00059">GeometryGenerator.h:59</a></div></div>
<div class="ttc" id="astruct_mesh_geometry_html"><div class="ttname"><a href="struct_mesh_geometry.html">MeshGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00156">d3dUtil.h:158</a></div></div>
<div class="ttc" id="astruct_object_constants_html"><div class="ttname"><a href="struct_object_constants.html">ObjectConstants</a></div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00007">FrameResource.h:8</a></div></div>
<div class="ttc" id="astruct_object_constants_html_ac2a0621da4e0ef99d7c8100ed64359ff"><div class="ttname"><a href="struct_object_constants.html#ac2a0621da4e0ef99d7c8100ed64359ff">ObjectConstants::World</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 World</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00009">FrameResource.h:9</a></div></div>
<div class="ttc" id="astruct_pass_constants_html"><div class="ttname"><a href="struct_pass_constants.html">PassConstants</a></div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00020">FrameResource.h:21</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a31fec7617b89727cc44c9802c57bb57a"><div class="ttname"><a href="struct_pass_constants.html#a31fec7617b89727cc44c9802c57bb57a">PassConstants::View</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 View</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00022">FrameResource.h:22</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a4c0b015fa6bc9623ccfa4be6a16a4da9"><div class="ttname"><a href="struct_pass_constants.html#a4c0b015fa6bc9623ccfa4be6a16a4da9">PassConstants::InvView</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 InvView</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00023">FrameResource.h:23</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a54f008edf338ad532633c2bb797fca88"><div class="ttname"><a href="struct_pass_constants.html#a54f008edf338ad532633c2bb797fca88">PassConstants::InvViewProj</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 InvViewProj</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00027">FrameResource.h:27</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a8af99b882f26e3507717dacc0c957521"><div class="ttname"><a href="struct_pass_constants.html#a8af99b882f26e3507717dacc0c957521">PassConstants::Proj</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 Proj</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00024">FrameResource.h:24</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a8b7dc8578d216518bff83264bc85d34c"><div class="ttname"><a href="struct_pass_constants.html#a8b7dc8578d216518bff83264bc85d34c">PassConstants::TotalTime</a></div><div class="ttdeci">float TotalTime</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00034">FrameResource.h:34</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_a9a1ac0a0421d54bf40c9749ec1d1537c"><div class="ttname"><a href="struct_pass_constants.html#a9a1ac0a0421d54bf40c9749ec1d1537c">PassConstants::InvProj</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 InvProj</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00025">FrameResource.h:25</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_aa44b7dd1a9692065876bd8d2d6efb76c"><div class="ttname"><a href="struct_pass_constants.html#aa44b7dd1a9692065876bd8d2d6efb76c">PassConstants::ViewProj</a></div><div class="ttdeci">DirectX::XMFLOAT4X4 ViewProj</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00026">FrameResource.h:26</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_aa902cc9c84da7a58dd0302624e58bfc3"><div class="ttname"><a href="struct_pass_constants.html#aa902cc9c84da7a58dd0302624e58bfc3">PassConstants::EyePosW</a></div><div class="ttdeci">DirectX::XMFLOAT3 EyePosW</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00028">FrameResource.h:28</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_aca6c8d20f6c92f8a117ef21bd7666687"><div class="ttname"><a href="struct_pass_constants.html#aca6c8d20f6c92f8a117ef21bd7666687">PassConstants::RenderTargetSize</a></div><div class="ttdeci">DirectX::XMFLOAT2 RenderTargetSize</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00030">FrameResource.h:30</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_acff44014fa749b6cc636c0ed3516bab7"><div class="ttname"><a href="struct_pass_constants.html#acff44014fa749b6cc636c0ed3516bab7">PassConstants::FarZ</a></div><div class="ttdeci">float FarZ</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00033">FrameResource.h:33</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_af25015138bf3b92384560ec1eed1e6aa"><div class="ttname"><a href="struct_pass_constants.html#af25015138bf3b92384560ec1eed1e6aa">PassConstants::InvRenderTargetSize</a></div><div class="ttdeci">DirectX::XMFLOAT2 InvRenderTargetSize</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00031">FrameResource.h:31</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_afd52d73d793299a6ad6a68bc137bd841"><div class="ttname"><a href="struct_pass_constants.html#afd52d73d793299a6ad6a68bc137bd841">PassConstants::DeltaTime</a></div><div class="ttdeci">float DeltaTime</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00035">FrameResource.h:35</a></div></div>
<div class="ttc" id="astruct_pass_constants_html_affe3124795eccdba77dae8cef5399e7d"><div class="ttname"><a href="struct_pass_constants.html#affe3124795eccdba77dae8cef5399e7d">PassConstants::NearZ</a></div><div class="ttdeci">float NearZ</div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00032">FrameResource.h:32</a></div></div>
<div class="ttc" id="astruct_render_item_html"><div class="ttname"><a href="struct_render_item.html">RenderItem</a></div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00023">Week10-1-CameraApp.cpp:24</a></div></div>
<div class="ttc" id="astruct_render_item_html_a2e0a651d0ad4ba7975455e22fbde1a28"><div class="ttname"><a href="struct_render_item.html#a2e0a651d0ad4ba7975455e22fbde1a28">RenderItem::World</a></div><div class="ttdeci">XMFLOAT4X4 World</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00031">Week10-1-CameraApp.cpp:31</a></div></div>
<div class="ttc" id="astruct_render_item_html_a3750ef7b2791ea922df46e222649f3dc"><div class="ttname"><a href="struct_render_item.html#a3750ef7b2791ea922df46e222649f3dc">RenderItem::BaseVertexLocation</a></div><div class="ttdeci">int BaseVertexLocation</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00053">Week10-1-CameraApp.cpp:53</a></div></div>
<div class="ttc" id="astruct_render_item_html_a4a4015284acd79469b70c358b6c1c2a1"><div class="ttname"><a href="struct_render_item.html#a4a4015284acd79469b70c358b6c1c2a1">RenderItem::ObjCBIndex</a></div><div class="ttdeci">UINT ObjCBIndex</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00042">Week10-1-CameraApp.cpp:42</a></div></div>
<div class="ttc" id="astruct_render_item_html_a61681a415ceebcbc0b8f07d616124deb"><div class="ttname"><a href="struct_render_item.html#a61681a415ceebcbc0b8f07d616124deb">RenderItem::Geo</a></div><div class="ttdeci">MeshGeometry * Geo</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00045">Week10-1-CameraApp.cpp:45</a></div></div>
<div class="ttc" id="astruct_render_item_html_a979179c6dd354cd329563e3599245463"><div class="ttname"><a href="struct_render_item.html#a979179c6dd354cd329563e3599245463">RenderItem::StartIndexLocation</a></div><div class="ttdeci">UINT StartIndexLocation</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00052">Week10-1-CameraApp.cpp:52</a></div></div>
<div class="ttc" id="astruct_render_item_html_ab3aad9050526250c4877956789e50b3a"><div class="ttname"><a href="struct_render_item.html#ab3aad9050526250c4877956789e50b3a">RenderItem::PrimitiveType</a></div><div class="ttdeci">D3D12_PRIMITIVE_TOPOLOGY PrimitiveType</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00048">Week10-1-CameraApp.cpp:48</a></div></div>
<div class="ttc" id="astruct_render_item_html_aca6ae2de91638af530fd5ce91fea3306"><div class="ttname"><a href="struct_render_item.html#aca6ae2de91638af530fd5ce91fea3306">RenderItem::NumFramesDirty</a></div><div class="ttdeci">int NumFramesDirty</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00039">Week10-1-CameraApp.cpp:39</a></div></div>
<div class="ttc" id="astruct_render_item_html_ad6c4cbd7fea14ab4b71bd3be38208487"><div class="ttname"><a href="struct_render_item.html#ad6c4cbd7fea14ab4b71bd3be38208487">RenderItem::RenderItem</a></div><div class="ttdeci">RenderItem()=default</div></div>
<div class="ttc" id="astruct_render_item_html_ad95fafa012c0d99c216b998f11207e38"><div class="ttname"><a href="struct_render_item.html#ad95fafa012c0d99c216b998f11207e38">RenderItem::IndexCount</a></div><div class="ttdeci">UINT IndexCount</div><div class="ttdef"><b>Definition:</b> <a href="_week10-1-_camera_app_8cpp_source.html#l00051">Week10-1-CameraApp.cpp:51</a></div></div>
<div class="ttc" id="astruct_submesh_geometry_html"><div class="ttname"><a href="struct_submesh_geometry.html">SubmeshGeometry</a></div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00145">d3dUtil.h:146</a></div></div>
<div class="ttc" id="astruct_submesh_geometry_html_a56f8aee51b11ee61a229679000a1aeb6"><div class="ttname"><a href="struct_submesh_geometry.html#a56f8aee51b11ee61a229679000a1aeb6">SubmeshGeometry::StartIndexLocation</a></div><div class="ttdeci">UINT StartIndexLocation</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00148">d3dUtil.h:148</a></div></div>
<div class="ttc" id="astruct_submesh_geometry_html_a95e805e2c8022aea5826d7343ee7dc20"><div class="ttname"><a href="struct_submesh_geometry.html#a95e805e2c8022aea5826d7343ee7dc20">SubmeshGeometry::BaseVertexLocation</a></div><div class="ttdeci">INT BaseVertexLocation</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00149">d3dUtil.h:149</a></div></div>
<div class="ttc" id="astruct_submesh_geometry_html_ab28b180ab73cabb07553c76f3f32c180"><div class="ttname"><a href="struct_submesh_geometry.html#ab28b180ab73cabb07553c76f3f32c180">SubmeshGeometry::IndexCount</a></div><div class="ttdeci">UINT IndexCount</div><div class="ttdef"><b>Definition:</b> <a href="d3d_util_8h_source.html#l00147">d3dUtil.h:147</a></div></div>
<div class="ttc" id="astruct_vertex_html"><div class="ttname"><a href="struct_vertex.html">Vertex</a></div><div class="ttdef"><b>Definition:</b> <a href="_week10_2_camera_and_dynamic_indexing_2_frame_resource_8h_source.html#l00063">FrameResource.h:64</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a5903971ae9d23fa051f94cbebb5dc7b.html">Week4</a></li><li class="navelem"><a class="el" href="dir_8aa347a7416d0034179c9a8677f18e92.html">BoxUsingFrameResource</a></li><li class="navelem"><a class="el" href="_week4-1-_box_using_frame_resources_8cpp.html">Week4-1-BoxUsingFrameResources.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
